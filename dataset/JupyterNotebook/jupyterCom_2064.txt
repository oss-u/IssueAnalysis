[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/274770873",
    "html_url": "https://github.com/jupyter/notebook/issues/2064#issuecomment-274770873",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2064",
    "id": 274770873,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NDc3MDg3Mw==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-24T10:53:07Z",
    "updated_at": "2017-01-24T10:53:07Z",
    "author_association": "MEMBER",
    "body": "Maybe this is something that would make more sense to do in Jupyterhub?",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/274837294",
    "html_url": "https://github.com/jupyter/notebook/issues/2064#issuecomment-274837294",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2064",
    "id": 274837294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NDgzNzI5NA==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-24T15:31:31Z",
    "updated_at": "2017-01-24T15:31:31Z",
    "author_association": "MEMBER",
    "body": "I think setting default permissions needs to be done at the FileContentsManager level. I'm happy for an option / different defaults in JupyterHub if that makes sense, but I think the option needs to be exposed somewhere in the single-user code. Unless setting `umask` for the process is enough, in which case JupyterHub can do it at the Spawner level.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/332223777",
    "html_url": "https://github.com/jupyter/notebook/issues/2064#issuecomment-332223777",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2064",
    "id": 332223777,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjIyMzc3Nw==",
    "user": {
      "login": "dclong",
      "id": 824507,
      "node_id": "MDQ6VXNlcjgyNDUwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dclong",
      "html_url": "https://github.com/dclong",
      "followers_url": "https://api.github.com/users/dclong/followers",
      "following_url": "https://api.github.com/users/dclong/following{/other_user}",
      "gists_url": "https://api.github.com/users/dclong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dclong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dclong/subscriptions",
      "organizations_url": "https://api.github.com/users/dclong/orgs",
      "repos_url": "https://api.github.com/users/dclong/repos",
      "events_url": "https://api.github.com/users/dclong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dclong/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-26T14:50:02Z",
    "updated_at": "2017-09-26T14:50:02Z",
    "author_association": "NONE",
    "body": "I came across issues (with the `.ipynb_checkpoints` directories) when trying to setup file permissions using umask. Please refer to this [issue](https://github.com/jupyter/notebook/issues/2858).",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/332226187",
    "html_url": "https://github.com/jupyter/notebook/issues/2064#issuecomment-332226187",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2064",
    "id": 332226187,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjIyNjE4Nw==",
    "user": {
      "login": "chris246",
      "id": 14861996,
      "node_id": "MDQ6VXNlcjE0ODYxOTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14861996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris246",
      "html_url": "https://github.com/chris246",
      "followers_url": "https://api.github.com/users/chris246/followers",
      "following_url": "https://api.github.com/users/chris246/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris246/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris246/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris246/subscriptions",
      "organizations_url": "https://api.github.com/users/chris246/orgs",
      "repos_url": "https://api.github.com/users/chris246/repos",
      "events_url": "https://api.github.com/users/chris246/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris246/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-26T14:57:23Z",
    "updated_at": "2017-09-26T14:57:23Z",
    "author_association": "NONE",
    "body": "In our case, the checkpoint directories are also a problem.\r\nMaybe - as @minrk suggested - this could be implemented inside the FileContentsManager, if fileio is the wrong place.\r\n\r\nI can take a closer look for a fix in October, if that is ok.\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/332559729",
    "html_url": "https://github.com/jupyter/notebook/issues/2064#issuecomment-332559729",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2064",
    "id": 332559729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjU1OTcyOQ==",
    "user": {
      "login": "dclong",
      "id": 824507,
      "node_id": "MDQ6VXNlcjgyNDUwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dclong",
      "html_url": "https://github.com/dclong",
      "followers_url": "https://api.github.com/users/dclong/followers",
      "following_url": "https://api.github.com/users/dclong/following{/other_user}",
      "gists_url": "https://api.github.com/users/dclong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dclong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dclong/subscriptions",
      "organizations_url": "https://api.github.com/users/dclong/orgs",
      "repos_url": "https://api.github.com/users/dclong/repos",
      "events_url": "https://api.github.com/users/dclong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dclong/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-27T15:28:00Z",
    "updated_at": "2017-09-27T15:28:00Z",
    "author_association": "NONE",
    "body": "@chris246 \r\nGreat! Looking forward to a fix!",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/335686166",
    "html_url": "https://github.com/jupyter/notebook/issues/2064#issuecomment-335686166",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2064",
    "id": 335686166,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTY4NjE2Ng==",
    "user": {
      "login": "dclong",
      "id": 824507,
      "node_id": "MDQ6VXNlcjgyNDUwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dclong",
      "html_url": "https://github.com/dclong",
      "followers_url": "https://api.github.com/users/dclong/followers",
      "following_url": "https://api.github.com/users/dclong/following{/other_user}",
      "gists_url": "https://api.github.com/users/dclong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dclong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dclong/subscriptions",
      "organizations_url": "https://api.github.com/users/dclong/orgs",
      "repos_url": "https://api.github.com/users/dclong/repos",
      "events_url": "https://api.github.com/users/dclong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dclong/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-11T05:20:29Z",
    "updated_at": "2017-10-11T05:21:08Z",
    "author_association": "NONE",
    "body": "I quickly checked the code and found the following piece of code which might be the root cause. \r\n```\r\n./services/contents/filecheckpoints.py:            ensure_dir_exists(cp_dir)\r\n```\r\nThe function `ensure_dir_exists` is in ipython_genutils/path.py. It has a parameter `mode` with default value `0o755`. Passing the right mode to `ensure_dir_exists` might resolve the issue. ",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/357724597",
    "html_url": "https://github.com/jupyter/notebook/issues/2064#issuecomment-357724597",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2064",
    "id": 357724597,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzcyNDU5Nw==",
    "user": {
      "login": "chris246",
      "id": 14861996,
      "node_id": "MDQ6VXNlcjE0ODYxOTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14861996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris246",
      "html_url": "https://github.com/chris246",
      "followers_url": "https://api.github.com/users/chris246/followers",
      "following_url": "https://api.github.com/users/chris246/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris246/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris246/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris246/subscriptions",
      "organizations_url": "https://api.github.com/users/chris246/orgs",
      "repos_url": "https://api.github.com/users/chris246/repos",
      "events_url": "https://api.github.com/users/chris246/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris246/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-15T16:05:20Z",
    "updated_at": "2018-01-15T16:05:20Z",
    "author_association": "NONE",
    "body": "Sorry for the delay.\r\n\r\nAfaik umask had to be set for every user, which is not feasible in our environment.\r\n\r\nI took a closer look on implementing the change in FileContentsManager.\r\n\r\nMy approach:\r\n1. Introduce new properties with default values and expose them to the notebook configuration file:\r\n   * `FileContentsManager.file_permission = 0o755`\r\n   * `FileContentsManager.dir_permission = 0o755` \r\n2. Modify [`FileContentsManager.save()`](https://github.com/jupyter/notebook/blob/master/notebook/services/contents/filemanager.py#L438) and implement setting the specified permissions for every `model['type']`\r\n\r\nOpen Questions:\r\n1. Python 2 uses a different permission notation, `0755`. Are there best practices for handling such issues?\r\n2. Permission setting using this approach will not work under Windows. Is that a problem?\r\n\r\n\r\n[FileContentsManager source](https://github.com/jupyter/notebook/blob/master/notebook/services/contents/filemanager.py#L69)",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/357744581",
    "html_url": "https://github.com/jupyter/notebook/issues/2064#issuecomment-357744581",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2064",
    "id": 357744581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1Nzc0NDU4MQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-15T17:23:17Z",
    "updated_at": "2018-01-15T17:23:17Z",
    "author_association": "MEMBER",
    "body": "There's a fix coming in notebook 5.3 to respect umask correctly (#3002). Notebook 5.3 should be released any day now.\r\n\r\nOnce that's out, it sounds to me like the best solution is to add support for setting umask in the relevant Jupyterhub spawners. Adding config to the notebook for default file permissions feels like we're reinventing something that the operating system already provides.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/357759285",
    "html_url": "https://github.com/jupyter/notebook/issues/2064#issuecomment-357759285",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2064",
    "id": 357759285,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1Nzc1OTI4NQ==",
    "user": {
      "login": "chris246",
      "id": 14861996,
      "node_id": "MDQ6VXNlcjE0ODYxOTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14861996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris246",
      "html_url": "https://github.com/chris246",
      "followers_url": "https://api.github.com/users/chris246/followers",
      "following_url": "https://api.github.com/users/chris246/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris246/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris246/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris246/subscriptions",
      "organizations_url": "https://api.github.com/users/chris246/orgs",
      "repos_url": "https://api.github.com/users/chris246/repos",
      "events_url": "https://api.github.com/users/chris246/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris246/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-15T18:35:16Z",
    "updated_at": "2018-01-15T18:35:16Z",
    "author_association": "NONE",
    "body": "Ok.\r\n\r\nJust for clarification/as summary: Notebook 5.3 will respect the current umask setting.  \r\nAccording to #2858, this already works for notebooks, but not for directories (especially .ipynb_checkpoints).\r\nThis is fixed by #3002.\r\n\r\nUsers can modify the notebook configuration to [set the desired umask using Python](https://github.com/jupyter/notebook/issues/2858#issue-260020185).  \r\nMaybe this possibility can be explained in the Docs.\r\n\r\nSetting the umask inside the configuration is an easy solution, that we can also apply in our environment.\r\n\r\nThank you for your support!",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/357785563",
    "html_url": "https://github.com/jupyter/notebook/issues/2064#issuecomment-357785563",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2064",
    "id": 357785563,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1Nzc4NTU2Mw==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-15T20:47:11Z",
    "updated_at": "2018-01-15T20:47:11Z",
    "author_association": "MEMBER",
    "body": "That sounds about right. JupyterHub might also gain an official setting to control the umask when starting individual notebook servers (changing it in the notebook config file is a clever trick rather than something we designed).",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/427270950",
    "html_url": "https://github.com/jupyter/notebook/issues/2064#issuecomment-427270950",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2064",
    "id": 427270950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI3MDk1MA==",
    "user": {
      "login": "asuchit",
      "id": 36220019,
      "node_id": "MDQ6VXNlcjM2MjIwMDE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/36220019?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/asuchit",
      "html_url": "https://github.com/asuchit",
      "followers_url": "https://api.github.com/users/asuchit/followers",
      "following_url": "https://api.github.com/users/asuchit/following{/other_user}",
      "gists_url": "https://api.github.com/users/asuchit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/asuchit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/asuchit/subscriptions",
      "organizations_url": "https://api.github.com/users/asuchit/orgs",
      "repos_url": "https://api.github.com/users/asuchit/repos",
      "events_url": "https://api.github.com/users/asuchit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/asuchit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-05T07:24:33Z",
    "updated_at": "2018-10-05T07:24:33Z",
    "author_association": "NONE",
    "body": "Jupyterhub does not start the server till home directory is not set at 757 ?\r\n\r\nI need to change the home directory /home/{user} permissions from 755 to 757.\r\n\r\nIs there any other way to fix this issue ?",
    "performed_via_github_app": null
  }
]
