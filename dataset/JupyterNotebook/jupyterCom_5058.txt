[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/554651916",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-554651916",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 554651916,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDY1MTkxNg==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-16T16:25:59Z",
    "updated_at": "2019-11-16T16:25:59Z",
    "author_association": "MEMBER",
    "body": "Hi @eramey16 - the issue is that the permissions of the connection file are violating the constraint that groups and others should not have read access to the file. `33279` in otcal is `0o100777` (this message is fixed to display octal in `jupyter_core` `4.6.1`) and shows groups and others have full read-write-execute access.  As a result, the exception is thrown.\r\n\r\nThe file `/u/my_username/Library/Jupyter/runtime/kernel-5f649f20-5d40-4ea0-8e62-9bb22653a00e.json` appears to be from an iOS machine.  Is this directory associated with any kind of filesystem other than iOS?\r\n\r\nSince `secure_write()` has been introduced, we've had a variety of edge cases that require consideration and I wonder if this is another.  cc: @MSeal  \r\n\r\nI recommend upgrading to juptyer_core `4.6.1` and confirm the updated error message - I don't think there are any changes that would resolve this issue however.  In addition, another change in this area, to [ignore the sticky bit](https://github.com/jupyter/jupyter_core/pull/177) was just merged but not released, but it too won't help as this appears as yet another edge case.  (sigh)",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/554682762",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-554682762",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 554682762,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDY4Mjc2Mg==",
    "user": {
      "login": "eramey16",
      "id": 30091115,
      "node_id": "MDQ6VXNlcjMwMDkxMTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/30091115?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eramey16",
      "html_url": "https://github.com/eramey16",
      "followers_url": "https://api.github.com/users/eramey16/followers",
      "following_url": "https://api.github.com/users/eramey16/following{/other_user}",
      "gists_url": "https://api.github.com/users/eramey16/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eramey16/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eramey16/subscriptions",
      "organizations_url": "https://api.github.com/users/eramey16/orgs",
      "repos_url": "https://api.github.com/users/eramey16/repos",
      "events_url": "https://api.github.com/users/eramey16/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eramey16/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-16T23:03:54Z",
    "updated_at": "2019-11-16T23:10:34Z",
    "author_association": "NONE",
    "body": "Hi @kevin-bates,\r\n\r\nThanks for your advice! I upgraded jupyter core and got a new error:\r\n```\r\nRuntimeError: Permissions assignment failed for secure file: '/u/my_username/Library/Jupyter/runtime/kernel-19e4dc38-891b-452a-843b-89a74e1e8b10.json'.Got '0o677' instead of '0o0600'\r\n```\r\n If the problem is with my group not having read access to the connection file, could an administrator just change the permissions to fix the problem? To my knowledge, no one else in my group has been having this issue although we should have the same access.\r\n\r\nI'm also not sure if the file has ever been associated with another system, but I can ask my advisor about the installation details. It's currently running on Mac OS X 10.14.6.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/554687632",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-554687632",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 554687632,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDY4NzYzMg==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-17T00:19:59Z",
    "updated_at": "2019-11-17T00:19:59Z",
    "author_association": "MEMBER",
    "body": "The issue is that the permissions test is resulting in too many permissions.  I.e., the last two octal digits (representing the Unix 'group' and 'others' attributes) should be 0.  Instead, anyone in your group and anyone in general can read (write and execute) this file.\r\n\r\nThis file is ephemeral and contains connection information to the kernel being launched.  It is created at the time the kernel is launched and (should be) deleted upon the kernel's termination.  The filename itself is essentially unique since it contains the uuid corresponding to the kernel.  So an admin has no ability to zero out the group and others permissions bit.\r\n\r\nWhat needs to happen is that we need to understand why creating the file with a permission mode of 0o0600 is resulting in permissions of 0o0777 (we drop the owner execute bit on the comparison, but know the perms were 0o0777 based on the original decimal value).  We have found that some filesystems exhibit odd behaviors and have made changes to tolerate those oddities.  I suspect this is another case of that, but we need to understand why so we have a means of identifying this \"scenario\".\r\n\r\nTypical Mac OS home directories are `/Users/<username>/` while yours appears to be `/u/<username>/` which is why I asked if this location was associated with some other kind of filesystem, or perhaps the user home directories are mounted from another system, etc.\r\n\r\nQuestion, if you simply touch a file in your home directory (e.g., `touch /u/my_username/foo`) what are its permissions (e.g., `ls -l /u/my_username/foo`)?\r\n\r\nAnother thing that might prove helpful is to point the runtime directory to a different location, like `/tmp`.  To do this experiment, do the following...\r\n1. Terminate your Notebook server.\r\n2. `export JUPYTER_RUNTIME_DIR=/tmp`\r\n3. Start Notebook server as you normally do.  (Note that this assumes you're not already setting the runtime directory in some other fashion).\r\n4. Attempt to create a kernel.  If you get the same failure, ensure the location of the kernel json file is in `/tmp`.  If the kernel gets created, then something's odd with `/u`.\r\n\r\nThanks for your patience. ",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/554697225",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-554697225",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 554697225,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDY5NzIyNQ==",
    "user": {
      "login": "eramey16",
      "id": 30091115,
      "node_id": "MDQ6VXNlcjMwMDkxMTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/30091115?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eramey16",
      "html_url": "https://github.com/eramey16",
      "followers_url": "https://api.github.com/users/eramey16/followers",
      "following_url": "https://api.github.com/users/eramey16/following{/other_user}",
      "gists_url": "https://api.github.com/users/eramey16/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eramey16/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eramey16/subscriptions",
      "organizations_url": "https://api.github.com/users/eramey16/orgs",
      "repos_url": "https://api.github.com/users/eramey16/repos",
      "events_url": "https://api.github.com/users/eramey16/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eramey16/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-17T02:49:10Z",
    "updated_at": "2019-11-17T02:51:43Z",
    "author_association": "NONE",
    "body": "Oh, sorry, I misunderstood your question. I think the user home directories are mounted from a different file system since I can access my same home directory from multiple computers in my lab. I couldn't log in at first when setting up my user account, so my advisor changed around my permissions until I could. I wonder now if we somehow added permissions that the jupyter server isn't happy with and that's what's causing the problem. Here are the permissions for a file created in my home directory:\r\n```\r\n(astroconda) <remote_server>:~ <my_username>$ touch foo\r\n(astroconda) <remote_server>:~ <my_username>$ ls -alt foo\r\n-rwxrwxrwx  1 <my_username>  <my_group>  0 Nov 16 18:37 foo*\r\n```\r\nIt seems everyone has full access, which probably shouldn't be the case?\r\n\r\nI tried your experiment and it worked right away! No error messages or warnings at all.\r\n\r\nThanks so much for your help!",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/554700885",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-554700885",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 554700885,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDcwMDg4NQ==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-17T03:45:48Z",
    "updated_at": "2019-11-17T03:45:48Z",
    "author_association": "MEMBER",
    "body": "Thanks for the update - glad to hear you have a way forward.  Should you want to continue with this workaround, you should probably point the runtime dir to a different (but local) location than `/tmp`.  I think the 0o777 perms can be addressed via NFS administration, but can't look into it.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/577772854",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-577772854",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 577772854,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3Nzc3Mjg1NA==",
    "user": {
      "login": "mirekphd",
      "id": 36706320,
      "node_id": "MDQ6VXNlcjM2NzA2MzIw",
      "avatar_url": "https://avatars.githubusercontent.com/u/36706320?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mirekphd",
      "html_url": "https://github.com/mirekphd",
      "followers_url": "https://api.github.com/users/mirekphd/followers",
      "following_url": "https://api.github.com/users/mirekphd/following{/other_user}",
      "gists_url": "https://api.github.com/users/mirekphd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mirekphd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mirekphd/subscriptions",
      "organizations_url": "https://api.github.com/users/mirekphd/orgs",
      "repos_url": "https://api.github.com/users/mirekphd/repos",
      "events_url": "https://api.github.com/users/mirekphd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mirekphd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-23T16:58:55Z",
    "updated_at": "2020-01-23T17:02:40Z",
    "author_association": "NONE",
    "body": "`2\\. JUPYTER_RUNTIME_DIR=/tmp`\r\n@kevin-bates Many thanks - this workaround resolved the issue in our case in python containers loosely based on `jupyter/base-notebook`, including their unmodified [fix-permissions.sh](https://github.com/jupyter/docker-stacks/blob/master/base-notebook/fix-permissions) script applied several times to `/home/$HOME` that caused this issue to emerge in our case (under Openshift 3.11 with persistent storage (PVCs) using NFS). \r\n\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/583608922",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-583608922",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 583608922,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzYwODkyMg==",
    "user": {
      "login": "dorrill",
      "id": 26100753,
      "node_id": "MDQ6VXNlcjI2MTAwNzUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26100753?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dorrill",
      "html_url": "https://github.com/dorrill",
      "followers_url": "https://api.github.com/users/dorrill/followers",
      "following_url": "https://api.github.com/users/dorrill/following{/other_user}",
      "gists_url": "https://api.github.com/users/dorrill/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dorrill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dorrill/subscriptions",
      "organizations_url": "https://api.github.com/users/dorrill/orgs",
      "repos_url": "https://api.github.com/users/dorrill/repos",
      "events_url": "https://api.github.com/users/dorrill/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dorrill/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-07T20:59:26Z",
    "updated_at": "2020-02-07T21:01:35Z",
    "author_association": "NONE",
    "body": "To add on to what others previously said, I was seeing this after the error: \r\n\r\n`Got '0677' instead of '0o0600'`\r\n\r\nLooking at ~/python_libs/lib/python2.7/site-packages/jupyter_core/paths.py, I saw that it was trying to force 0o600 permissions, which makes sense. It wants only me to be writing in the jupyter notebook while it's running. However, it seemed that something had happened on our server and now files, including the notebook's kernal file, are being created with permissions set to 0677 instead of 0600. In my case, I don't have admin privileges, but it's also OK with me to have it set to 0677. So I changed two lines in paths.py and now everything worked as expected:\r\n\r\nThe relevant, old version of paths.py:\r\n\r\n```\r\nwith os.fdopen(os.open(fname, open_flag, 0o0600), mode) as f:'\r\n\r\n      if os.name != 'nt':\r\n            # Enforce that the file got the requested permissions before writing\r\n            file_mode = get_file_mode(fname)\r\n            if 0o0600 != (file_mode):\r\n                raise RuntimeError(\"Permissions assignment failed for secure file: '{file}'.\"\r\n                    \"Got '{permissions}' instead of '0o0600'\"\r\n                    .format(file=fname, permissions=oct(file_mode)))\r\n        yield f\r\n```\r\nThe edited version:\r\n```\r\n    with os.fdopen(os.open(fname, open_flag, 0o0677), mode) as f:\r\n        if os.name != 'nt':\r\n            # Enforce that the file got the requested permissions before writing\r\n            file_mode = get_file_mode(fname)\r\n            if 0o0677 != (file_mode):\r\n                raise RuntimeError(\"Permissions assignment failed for secure file: '{file}'.\"\r\n                    \"Got '{permissions}' instead of '0o0600'\"\r\n                    .format(file=fname, permissions=oct(file_mode)))\r\n        yield f\r\n```\r\n\r\nBasically, changing the expected permission in the if statement to what is being forced on the server made it all work OK. Why are things stuck in this mode? I'm not sure. Perhaps someone else can answer.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/583672960",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-583672960",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 583672960,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzY3Mjk2MA==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-08T00:25:26Z",
    "updated_at": "2020-02-08T00:25:26Z",
    "author_association": "MEMBER",
    "body": "Hi @dorrill - I wouldn't recommend others make this change - although I understand the frustration.\r\n\r\nWhat likely changed is that your filesystem is probably a mounted filesystem and, in some cases, the default permissions that get applied are octal 777 (read-write-execute for owner-group-others).  In essence, anyone can read and write to what should be a secure file.\r\n\r\nAs noted above, the proper workaround for this would be to consult with the admin and look into ways such that the filesystem doesn't automatically promote permissions to o777.  However, that isn't always an option (which is the case for you).  I would then recommend pointing the environment variable `JUPYTER_RUNTIME_DIR` to a different location on your systems, one that is not within such a filesystem.  Once done, the appropriate permissions (o600 - read-write for owner only) should result.\r\n\r\nThere has been some discussion of possibly relaxing this check by providing some kind of indicator that such an action is permitted, but that's not available at this moment.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/584734585",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-584734585",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 584734585,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDczNDU4NQ==",
    "user": {
      "login": "MSeal",
      "id": 1863892,
      "node_id": "MDQ6VXNlcjE4NjM4OTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1863892?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MSeal",
      "html_url": "https://github.com/MSeal",
      "followers_url": "https://api.github.com/users/MSeal/followers",
      "following_url": "https://api.github.com/users/MSeal/following{/other_user}",
      "gists_url": "https://api.github.com/users/MSeal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MSeal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MSeal/subscriptions",
      "organizations_url": "https://api.github.com/users/MSeal/orgs",
      "repos_url": "https://api.github.com/users/MSeal/repos",
      "events_url": "https://api.github.com/users/MSeal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MSeal/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-11T16:53:20Z",
    "updated_at": "2020-02-11T16:53:20Z",
    "author_association": "NONE",
    "body": "@dorrill with jupyter core 4.6.2 you can use the `JUPYTER_ALLOW_INSECURE_WRITES=true` environment variable now to opt out of secure writes. This should remove the error but add a warning and allow for execution to progress.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/599240280",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-599240280",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 599240280,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5OTI0MDI4MA==",
    "user": {
      "login": "OlafEichstaedt",
      "id": 24755597,
      "node_id": "MDQ6VXNlcjI0NzU1NTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/24755597?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/OlafEichstaedt",
      "html_url": "https://github.com/OlafEichstaedt",
      "followers_url": "https://api.github.com/users/OlafEichstaedt/followers",
      "following_url": "https://api.github.com/users/OlafEichstaedt/following{/other_user}",
      "gists_url": "https://api.github.com/users/OlafEichstaedt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/OlafEichstaedt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/OlafEichstaedt/subscriptions",
      "organizations_url": "https://api.github.com/users/OlafEichstaedt/orgs",
      "repos_url": "https://api.github.com/users/OlafEichstaedt/repos",
      "events_url": "https://api.github.com/users/OlafEichstaedt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/OlafEichstaedt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-15T17:31:20Z",
    "updated_at": "2020-03-15T17:31:20Z",
    "author_association": "NONE",
    "body": "Kernel did not want to start for me as well:\r\n\r\n* my host runs Windows 10\r\n* I built a Docker container with from `jupyter/minimal-notebook`\r\n* I mount the host's `./notebooks` as the container's `/home/jovyan`\r\n* after the build, I see `.cache`, `.ipynb_checkpoints`, `.ipython`,` .jupyter`, `.local` directories in my host's  `notebook` directory\r\n* when I open a Linux shell for the docker container from the Docker Dashboard, I see (with `Untitled.ipynb` being a random notebook saved from Jupyter Lab during testing):\r\n```\r\n$ ls -la\r\ntotal 4\r\ndrwxrwxrwx 1 root root    0 Mar 15 15:51 .cache\r\ndrwxrwxrwx 1 root root    0 Mar 15 15:55 .ipynb_checkpoints\r\ndrwxrwxrwx 1 root root 4096 Mar 15 16:08 .ipython\r\ndrwxrwxrwx 1 root root    0 Mar 15 15:55 .jupyter\r\ndrwxrwxrwx 1 root root    0 Mar 15 15:51 .local\r\n-rwxr-xr-x 1 root root  845 Mar 15 16:09 Untitled.ipynb\r\n```\r\nand the secret files are\r\n```\r\n$  ls -la .local/share/jupyter\r\ntotal 0\r\ndrwxrwxrwx 1 root root  4096 Mar 15 16:09 .\r\ndrwxrwxrwx 1 root root     0 Mar 15 15:51 ..\r\n-rwxr-xr-x 1 root root 16384 Mar 15 16:09 nbsignatures.db\r\n-rwxr-xr-x 1 root root  1386 Mar 15 15:55 notebook_secret\r\ndrwxrwxrwx 1 root root  4096 Mar 15 16:08 runtime\r\n```\r\nWhen I query the permissions with `stat FILENAME` from the linux shell, they are 0755 and in agreement with the output of `ls -la` . Unfortunately, I don't understad yet how that relates to the original error `got '0o677' instead of '0o0600'`.\r\n\r\nI use `ENV JUPYTER_ALLOW_INSECURE_WRITES=true` in the Dockerfile for the time being.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/599599367",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-599599367",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 599599367,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5OTU5OTM2Nw==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-16T15:27:53Z",
    "updated_at": "2020-03-16T15:27:53Z",
    "author_association": "MEMBER",
    "body": "Hi @OlafEichstaedt.  We've found that the mounting of certain filesystems impose security constraints such that file permissions for groups and others can't be altered - which is what `secure_write()` is attempting to do with the kernel.json files within the `runtime` directory.  \r\n\r\nOne alternative (aside from possibly adjusting the mount parameters, if available) is to set the environment variable, as you have done.  This essentially skips the permission check.\r\n\r\nAnother alternative is to point the `JUPYTER_RUNTIME_DIR` (environment variable) to a directory within the container (e.g., `/tmp`) where these files can reside and proper permissions can be applied.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/611910334",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-611910334",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 611910334,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTkxMDMzNA==",
    "user": {
      "login": "jesusmariajurado",
      "id": 19391337,
      "node_id": "MDQ6VXNlcjE5MzkxMzM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19391337?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jesusmariajurado",
      "html_url": "https://github.com/jesusmariajurado",
      "followers_url": "https://api.github.com/users/jesusmariajurado/followers",
      "following_url": "https://api.github.com/users/jesusmariajurado/following{/other_user}",
      "gists_url": "https://api.github.com/users/jesusmariajurado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jesusmariajurado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jesusmariajurado/subscriptions",
      "organizations_url": "https://api.github.com/users/jesusmariajurado/orgs",
      "repos_url": "https://api.github.com/users/jesusmariajurado/repos",
      "events_url": "https://api.github.com/users/jesusmariajurado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jesusmariajurado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-10T07:08:03Z",
    "updated_at": "2020-04-10T07:08:03Z",
    "author_association": "NONE",
    "body": "Hi all. Setting JUPYTER_RUNTIME_DIR to a different directory than the one mounted by docker is running for me, using /tmp for example. But it was a pain to discover that env it wasn't recognized by notebook because I was running jupyterhub. I had to set the env_keep value for jupyterhub in this way\r\n\r\nc.Spawner.env_keep = ['PATH', 'PYTHONPATH', 'CONDA_ROOT', 'CONDA_DEFAULT_ENV', 'VIRTUAL_ENV', 'LANG', 'LC_ALL', '**JUPYTER_RUNTIME_DIR**']\r\n\r\nI hope this can help you, consider to search if notebook is being launched by another process, so maybe that process could be configured to set the appropriate envs.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/657161887",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-657161887",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 657161887,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NzE2MTg4Nw==",
    "user": {
      "login": "IDCS1426",
      "id": 2735099,
      "node_id": "MDQ6VXNlcjI3MzUwOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2735099?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/IDCS1426",
      "html_url": "https://github.com/IDCS1426",
      "followers_url": "https://api.github.com/users/IDCS1426/followers",
      "following_url": "https://api.github.com/users/IDCS1426/following{/other_user}",
      "gists_url": "https://api.github.com/users/IDCS1426/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/IDCS1426/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IDCS1426/subscriptions",
      "organizations_url": "https://api.github.com/users/IDCS1426/orgs",
      "repos_url": "https://api.github.com/users/IDCS1426/repos",
      "events_url": "https://api.github.com/users/IDCS1426/events{/privacy}",
      "received_events_url": "https://api.github.com/users/IDCS1426/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-12T01:57:23Z",
    "updated_at": "2020-07-12T01:57:23Z",
    "author_association": "NONE",
    "body": "Hi. \r\nI tried the solution above, and indeed it works. But as it won't fix the cause (Docker doesn't work well on Windows), I decided to switch to WLS 2 so Jupyter is running in a linux subsystem on Windows 10 Pro. \r\nWork like a charm, just have to chown the share folder as described [here](https://github.com/jupyter/docker-stacks/issues/1003)\r\nJupyter can even be accessed another computer. Just awesome. Thanks for the great work guys!",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/742813674",
    "html_url": "https://github.com/jupyter/notebook/issues/5058#issuecomment-742813674",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5058",
    "id": 742813674,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MjgxMzY3NA==",
    "user": {
      "login": "felipegb94",
      "id": 4529951,
      "node_id": "MDQ6VXNlcjQ1Mjk5NTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4529951?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/felipegb94",
      "html_url": "https://github.com/felipegb94",
      "followers_url": "https://api.github.com/users/felipegb94/followers",
      "following_url": "https://api.github.com/users/felipegb94/following{/other_user}",
      "gists_url": "https://api.github.com/users/felipegb94/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/felipegb94/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/felipegb94/subscriptions",
      "organizations_url": "https://api.github.com/users/felipegb94/orgs",
      "repos_url": "https://api.github.com/users/felipegb94/repos",
      "events_url": "https://api.github.com/users/felipegb94/events{/privacy}",
      "received_events_url": "https://api.github.com/users/felipegb94/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-10T21:33:25Z",
    "updated_at": "2020-12-10T21:38:11Z",
    "author_association": "NONE",
    "body": "For anyone encountering this issue when trying to run your jupyter notebook on Windows using WSL, the solution of simply running `export JUPYTER_RUNTIME_DIR=/tmp` proposed [above](https://github.com/jupyter/notebook/issues/5058#issuecomment-554687632), worked for me.\r\n\r\nIn my case, I had my notebook file stored in the Windows filesystem (i.e., `/mnt/c/Users/USERNAME/PATHTONOTEBOOK`), and the conda environment in the WSL filesystem (i.e., `/home/USER/miniconda3/envs`), and I was loading the notebook from the browser installed on Windows. I think this weird configuration encountered some file permission issues, and that is why I was getting the error.\r\n\r\nBut simply setting `export JUPYTER_RUNTIME_DIR=/tmp`, seems to have fixed it.",
    "performed_via_github_app": null
  }
]
