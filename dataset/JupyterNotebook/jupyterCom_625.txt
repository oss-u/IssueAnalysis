[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/149890963",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-149890963",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 149890963,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0OTg5MDk2Mw==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-21T13:17:57Z",
    "updated_at": "2015-10-21T13:17:57Z",
    "author_association": "MEMBER",
    "body": "@rgbkrk ideas? @jsalva have you tried switch from 'localhost' to '127.0.0.1' explicitly?\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/149983607",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-149983607",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 149983607,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0OTk4MzYwNw==",
    "user": {
      "login": "jsalva",
      "id": 1093264,
      "node_id": "MDQ6VXNlcjEwOTMyNjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1093264?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jsalva",
      "html_url": "https://github.com/jsalva",
      "followers_url": "https://api.github.com/users/jsalva/followers",
      "following_url": "https://api.github.com/users/jsalva/following{/other_user}",
      "gists_url": "https://api.github.com/users/jsalva/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jsalva/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jsalva/subscriptions",
      "organizations_url": "https://api.github.com/users/jsalva/orgs",
      "repos_url": "https://api.github.com/users/jsalva/repos",
      "events_url": "https://api.github.com/users/jsalva/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jsalva/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-21T18:19:22Z",
    "updated_at": "2015-10-21T18:19:22Z",
    "author_association": "NONE",
    "body": "I just tried updating every occurrence of localhost to 127.0.0.1 in `~/.jupyter/jupyter_notebook_config.py`, as well as in `/etc/nginx/conf.d/configuration.conf`, to no avail\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/157457137",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-157457137",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 157457137,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzQ1NzEzNw==",
    "user": {
      "login": "ianabc",
      "id": 1831640,
      "node_id": "MDQ6VXNlcjE4MzE2NDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1831640?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ianabc",
      "html_url": "https://github.com/ianabc",
      "followers_url": "https://api.github.com/users/ianabc/followers",
      "following_url": "https://api.github.com/users/ianabc/following{/other_user}",
      "gists_url": "https://api.github.com/users/ianabc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ianabc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ianabc/subscriptions",
      "organizations_url": "https://api.github.com/users/ianabc/orgs",
      "repos_url": "https://api.github.com/users/ianabc/repos",
      "events_url": "https://api.github.com/users/ianabc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ianabc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-17T18:13:28Z",
    "updated_at": "2015-11-17T18:13:28Z",
    "author_association": "NONE",
    "body": "@jsalva did you get anywhere with this? I'm doing something similar with apache and running into the same problem.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/157458027",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-157458027",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 157458027,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzQ1ODAyNw==",
    "user": {
      "login": "jsalva",
      "id": 1093264,
      "node_id": "MDQ6VXNlcjEwOTMyNjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1093264?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jsalva",
      "html_url": "https://github.com/jsalva",
      "followers_url": "https://api.github.com/users/jsalva/followers",
      "following_url": "https://api.github.com/users/jsalva/following{/other_user}",
      "gists_url": "https://api.github.com/users/jsalva/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jsalva/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jsalva/subscriptions",
      "organizations_url": "https://api.github.com/users/jsalva/orgs",
      "repos_url": "https://api.github.com/users/jsalva/repos",
      "events_url": "https://api.github.com/users/jsalva/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jsalva/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-17T18:17:22Z",
    "updated_at": "2015-11-17T18:17:22Z",
    "author_association": "NONE",
    "body": "I wish I could have some helpful updates, but nope, gave up and moved on.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/157484914",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-157484914",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 157484914,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzQ4NDkxNA==",
    "user": {
      "login": "markoverholser",
      "id": 14033700,
      "node_id": "MDQ6VXNlcjE0MDMzNzAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/14033700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markoverholser",
      "html_url": "https://github.com/markoverholser",
      "followers_url": "https://api.github.com/users/markoverholser/followers",
      "following_url": "https://api.github.com/users/markoverholser/following{/other_user}",
      "gists_url": "https://api.github.com/users/markoverholser/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markoverholser/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markoverholser/subscriptions",
      "organizations_url": "https://api.github.com/users/markoverholser/orgs",
      "repos_url": "https://api.github.com/users/markoverholser/repos",
      "events_url": "https://api.github.com/users/markoverholser/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markoverholser/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-17T19:45:42Z",
    "updated_at": "2015-11-17T19:45:42Z",
    "author_association": "NONE",
    "body": "I run mine behind a reverse proxy on Apache, and it took me a full evening of googling and editing my configuration and restarting, but I was able to get it with these directives:\n\n```\n<Location /notebook>\n    RequestHeader unset Accept-Encoding\n    ProxyPass        http://notebook:8888/notebook\n    ProxyPassReverse http://notebook:8888/notebook\n    ProxyPreserveHost on\n    Order allow,deny\n    Allow from all\n</Location>\n<Location /notebook/api/kernels/>\n    ProxyPass        ws://notebook:8888/notebook/api/kernels/\n    ProxyPassReverse ws://notebook:8888/notebook/api/kernels/\n</Location>\n```\n\nHad to enable some additional modules for Apache for this to work (on Ubuntu 14.04 LTS):\n\n```\nsudo a2enmod proxy\nsudo a2enmod proxy_http\nsudo a2enmod proxy_https\nsudo a2enmod proxy_wstunnel\nsudo a2enmod headers\n```\n\nAlso, in my .jupyter/jupyter_notebook_config.py I changed the base URL for the notebook (since it's being hosted as a virtual folder this makes the reverse proxying easier):\n\n```\nc.NotebookApp.base_url = '/notebook'\n```\n\n@ianabc @jsalva Feel free to ping me for discussion. I am not 100% sure what your situations are, or if this helps, and I am hardly an Apache guy, but I did manage to make it work.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/157503077",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-157503077",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 157503077,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzUwMzA3Nw==",
    "user": {
      "login": "ianabc",
      "id": 1831640,
      "node_id": "MDQ6VXNlcjE4MzE2NDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1831640?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ianabc",
      "html_url": "https://github.com/ianabc",
      "followers_url": "https://api.github.com/users/ianabc/followers",
      "following_url": "https://api.github.com/users/ianabc/following{/other_user}",
      "gists_url": "https://api.github.com/users/ianabc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ianabc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ianabc/subscriptions",
      "organizations_url": "https://api.github.com/users/ianabc/orgs",
      "repos_url": "https://api.github.com/users/ianabc/repos",
      "events_url": "https://api.github.com/users/ianabc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ianabc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-17T20:53:23Z",
    "updated_at": "2015-11-17T20:53:23Z",
    "author_association": "NONE",
    "body": "@hosemn I was missing the proxy_wstunnel module, when turned on debugging I could see the protocol error. Thanks for your help!\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/157509800",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-157509800",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 157509800,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzUwOTgwMA==",
    "user": {
      "login": "markoverholser",
      "id": 14033700,
      "node_id": "MDQ6VXNlcjE0MDMzNzAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/14033700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markoverholser",
      "html_url": "https://github.com/markoverholser",
      "followers_url": "https://api.github.com/users/markoverholser/followers",
      "following_url": "https://api.github.com/users/markoverholser/following{/other_user}",
      "gists_url": "https://api.github.com/users/markoverholser/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markoverholser/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markoverholser/subscriptions",
      "organizations_url": "https://api.github.com/users/markoverholser/orgs",
      "repos_url": "https://api.github.com/users/markoverholser/repos",
      "events_url": "https://api.github.com/users/markoverholser/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markoverholser/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-17T21:17:19Z",
    "updated_at": "2015-11-17T21:17:19Z",
    "author_association": "NONE",
    "body": "Glad it worked for you, and I hope it helps other Apache users. As for nginx, I am not sure where to start.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/168110162",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-168110162",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 168110162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODExMDE2Mg==",
    "user": {
      "login": "cboettig",
      "id": 222586,
      "node_id": "MDQ6VXNlcjIyMjU4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/222586?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cboettig",
      "html_url": "https://github.com/cboettig",
      "followers_url": "https://api.github.com/users/cboettig/followers",
      "following_url": "https://api.github.com/users/cboettig/following{/other_user}",
      "gists_url": "https://api.github.com/users/cboettig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cboettig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cboettig/subscriptions",
      "organizations_url": "https://api.github.com/users/cboettig/orgs",
      "repos_url": "https://api.github.com/users/cboettig/repos",
      "events_url": "https://api.github.com/users/cboettig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cboettig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-31T02:01:04Z",
    "updated_at": "2015-12-31T02:01:04Z",
    "author_association": "NONE",
    "body": "Hmm, I also cannot get nginx proxy or a caddyserver proxy working.  I can get pretty close, can log in and create and delete files, but cannot connect to a python kernel (or launch a terminal).  Must have something to do with the websockets proxy, but it's beyond me.  The Jupyter logs just show 400 errors like:\n`[W 01:51:26.202 NotebookApp] 400 GET /api/kernels/aa45474d-7fb8-4685-98dc-5ebeba378f41/channels?session_id=1A9BFB019EE0472486650C81705BCC73 (172.17.0.1) 5.77ms referer=None`\n\nMy nginx conf is here: https://gist.github.com/cboettig/8643341bd3c93b62b5c2 (simple variations, e.g. serving from root instead of a subdomain, or serving without the ssl parts still give me the same issue).  Any suggestions?\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/168127213",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-168127213",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 168127213,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODEyNzIxMw==",
    "user": {
      "login": "ellisonbg",
      "id": 27600,
      "node_id": "MDQ6VXNlcjI3NjAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ellisonbg",
      "html_url": "https://github.com/ellisonbg",
      "followers_url": "https://api.github.com/users/ellisonbg/followers",
      "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions",
      "organizations_url": "https://api.github.com/users/ellisonbg/orgs",
      "repos_url": "https://api.github.com/users/ellisonbg/repos",
      "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ellisonbg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-31T05:21:11Z",
    "updated_at": "2015-12-31T05:21:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Don't know if it will help, but here is a working nginx config file for\njupyterhub:\n\nhttps://github.com/calpolydatascience/jupyterhub-deploy-data301/blob/master/roles/nginx/templates/nginx.conf.j2\n\nOn Wed, Dec 30, 2015 at 6:01 PM, Carl Boettiger notifications@github.com\nwrote:\n\n> Hmm, I also cannot get nginx proxy or a caddyserver proxy working. I can\n> get pretty close, can log in and create and delete files, but cannot\n> connect to a python kernel (or launch a terminal). Must have something to\n> do with the websockets proxy, but it's beyond me. The Jupyter logs just\n> show 400 errors like:\n> [W 01:51:26.202 NotebookApp] 400 GET\n> /api/kernels/aa45474d-7fb8-4685-98dc-5ebeba378f41/channels?session_id=1A9BFB019EE0472486650C81705BCC73\n> (172.17.0.1) 5.77ms referer=None\n> \n> My nginx conf is here:\n> https://gist.github.com/cboettig/8643341bd3c93b62b5c2 (simple variations,\n> e.g. serving from root instead of a subdomain, or serving without the ssl\n> parts still give me the same issue). Any suggestions?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/625#issuecomment-168110162.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/168128227",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-168128227",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 168128227,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODEyODIyNw==",
    "user": {
      "login": "cboettig",
      "id": 222586,
      "node_id": "MDQ6VXNlcjIyMjU4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/222586?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cboettig",
      "html_url": "https://github.com/cboettig",
      "followers_url": "https://api.github.com/users/cboettig/followers",
      "following_url": "https://api.github.com/users/cboettig/following{/other_user}",
      "gists_url": "https://api.github.com/users/cboettig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cboettig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cboettig/subscriptions",
      "organizations_url": "https://api.github.com/users/cboettig/orgs",
      "repos_url": "https://api.github.com/users/cboettig/repos",
      "events_url": "https://api.github.com/users/cboettig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cboettig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-31T05:44:00Z",
    "updated_at": "2015-12-31T05:44:00Z",
    "author_association": "NONE",
    "body": "@ellisonbg Thanks for the suggestion, I've actually tried that config as well (after putting in the appropriate values for the ansible-template chunks), and I get the exact same issue -- nginx shows 400 errors trying to connect to the kernel, and Jupyter opens but cannot reach a python kernel...\n\nI'm running the jupyter instance via a docker container from [jupyter/docker-stacks](https://github.com/jupyter/docker-stacks); but don't see why that should be messing up the connection to the kernel when behind a proxy...\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/169115250",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-169115250",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 169115250,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTExNTI1MA==",
    "user": {
      "login": "rcompton",
      "id": 1761810,
      "node_id": "MDQ6VXNlcjE3NjE4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1761810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rcompton",
      "html_url": "https://github.com/rcompton",
      "followers_url": "https://api.github.com/users/rcompton/followers",
      "following_url": "https://api.github.com/users/rcompton/following{/other_user}",
      "gists_url": "https://api.github.com/users/rcompton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rcompton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rcompton/subscriptions",
      "organizations_url": "https://api.github.com/users/rcompton/orgs",
      "repos_url": "https://api.github.com/users/rcompton/repos",
      "events_url": "https://api.github.com/users/rcompton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rcompton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-05T20:04:49Z",
    "updated_at": "2016-01-06T01:06:55Z",
    "author_association": "NONE",
    "body": "@cboettig Exact same issue here (using nginx in front of https://hub.docker.com/r/jupyter/jupyterhub/~/dockerfile/ ). No idea what could be wrong.\n\nnginx tells me \"client closed connection while waiting for request\"\n\nUpdate: Turns out my issue was that my nginx server was behind an aws ELB (for https). ELBs need special configs for websockets. I ended up just bypassing the ELB. \n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/170111906",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-170111906",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 170111906,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MDExMTkwNg==",
    "user": {
      "login": "cboettig",
      "id": 222586,
      "node_id": "MDQ6VXNlcjIyMjU4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/222586?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cboettig",
      "html_url": "https://github.com/cboettig",
      "followers_url": "https://api.github.com/users/cboettig/followers",
      "following_url": "https://api.github.com/users/cboettig/following{/other_user}",
      "gists_url": "https://api.github.com/users/cboettig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cboettig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cboettig/subscriptions",
      "organizations_url": "https://api.github.com/users/cboettig/orgs",
      "repos_url": "https://api.github.com/users/cboettig/repos",
      "events_url": "https://api.github.com/users/cboettig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cboettig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-08T20:14:54Z",
    "updated_at": "2016-01-08T20:14:54Z",
    "author_association": "NONE",
    "body": "@rcompton Thanks, turned out my issue was also websockets related (and had `hub`-style redirects with `user` bit in my previous file).  Here's the tweaked nginx working for me now: https://gist.github.com/cboettig/8643341bd3c93b62b5c2\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/225337714",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-225337714",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 225337714,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTMzNzcxNA==",
    "user": {
      "login": "nicerobot",
      "id": 17196,
      "node_id": "MDQ6VXNlcjE3MTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/17196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicerobot",
      "html_url": "https://github.com/nicerobot",
      "followers_url": "https://api.github.com/users/nicerobot/followers",
      "following_url": "https://api.github.com/users/nicerobot/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicerobot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicerobot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicerobot/subscriptions",
      "organizations_url": "https://api.github.com/users/nicerobot/orgs",
      "repos_url": "https://api.github.com/users/nicerobot/repos",
      "events_url": "https://api.github.com/users/nicerobot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicerobot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-11T05:17:03Z",
    "updated_at": "2016-06-11T05:17:03Z",
    "author_association": "NONE",
    "body": "It works for me using [jsalva's](https://github.com/jupyter/notebook/issues/625#issue-112465411) config with one small change:\n\n```\nlocation ~ /api/kernels/ {\n```\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/235576972",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-235576972",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 235576972,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTU3Njk3Mg==",
    "user": {
      "login": "AlfioEmanueleFresta",
      "id": 621062,
      "node_id": "MDQ6VXNlcjYyMTA2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/621062?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlfioEmanueleFresta",
      "html_url": "https://github.com/AlfioEmanueleFresta",
      "followers_url": "https://api.github.com/users/AlfioEmanueleFresta/followers",
      "following_url": "https://api.github.com/users/AlfioEmanueleFresta/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlfioEmanueleFresta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlfioEmanueleFresta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlfioEmanueleFresta/subscriptions",
      "organizations_url": "https://api.github.com/users/AlfioEmanueleFresta/orgs",
      "repos_url": "https://api.github.com/users/AlfioEmanueleFresta/repos",
      "events_url": "https://api.github.com/users/AlfioEmanueleFresta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlfioEmanueleFresta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-27T12:58:44Z",
    "updated_at": "2016-07-27T12:58:44Z",
    "author_association": "NONE",
    "body": "@nicerobot's suggestion worked for me. Thanks!\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/288220127",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-288220127",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 288220127,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODIyMDEyNw==",
    "user": {
      "login": "qqrs",
      "id": 2267807,
      "node_id": "MDQ6VXNlcjIyNjc4MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2267807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qqrs",
      "html_url": "https://github.com/qqrs",
      "followers_url": "https://api.github.com/users/qqrs/followers",
      "following_url": "https://api.github.com/users/qqrs/following{/other_user}",
      "gists_url": "https://api.github.com/users/qqrs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qqrs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qqrs/subscriptions",
      "organizations_url": "https://api.github.com/users/qqrs/orgs",
      "repos_url": "https://api.github.com/users/qqrs/repos",
      "events_url": "https://api.github.com/users/qqrs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qqrs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-21T21:11:50Z",
    "updated_at": "2017-03-21T21:11:50Z",
    "author_association": "NONE",
    "body": "This worked for me, based on jsalva's post (behind VPN so no SSL):\r\n\r\n```\r\nserver {\r\n    listen 80 default_server;\r\n\r\n    location / {\r\n        proxy_pass            http://localhost:{{ jupyter_server_port }};\r\n        proxy_set_header      Host $host;\r\n    }\r\n\r\n    location /api/kernels/ {\r\n        proxy_pass            http://localhost:{{ jupyter_server_port }};\r\n        proxy_set_header      Host $host;\r\n        # websocket support\r\n        proxy_http_version    1.1;\r\n        proxy_set_header      Upgrade \"websocket\";\r\n        proxy_set_header      Connection \"Upgrade\";\r\n        proxy_read_timeout    86400;\r\n    }\r\n}\r\n```",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/362985148",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-362985148",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 362985148,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Mjk4NTE0OA==",
    "user": {
      "login": "wintermelons",
      "id": 8782072,
      "node_id": "MDQ6VXNlcjg3ODIwNzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8782072?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wintermelons",
      "html_url": "https://github.com/wintermelons",
      "followers_url": "https://api.github.com/users/wintermelons/followers",
      "following_url": "https://api.github.com/users/wintermelons/following{/other_user}",
      "gists_url": "https://api.github.com/users/wintermelons/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wintermelons/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wintermelons/subscriptions",
      "organizations_url": "https://api.github.com/users/wintermelons/orgs",
      "repos_url": "https://api.github.com/users/wintermelons/repos",
      "events_url": "https://api.github.com/users/wintermelons/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wintermelons/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-05T05:26:16Z",
    "updated_at": "2018-02-05T05:26:16Z",
    "author_association": "NONE",
    "body": "Just ran into this issue, and tried the solution by @qqrs, but it isn't exactly future-proof and some functionalities like spawning terminals still didn't work. I dug a little deeper and found that websockets in Nginx only needs a specified http version, and being able to upgrade the connection into a tunnel. I currently have this config working:\r\n\r\n```\r\nmap $http_upgrade $connection_upgrade {\r\n        default upgrade;\r\n        ''      close;\r\n}\r\n\r\nserver {\r\n        listen 80;\r\n        server_name jupyter.somewhere.cool;\r\n\r\n        location / {\r\n                proxy_pass            http://localhost:9999;\r\n                proxy_set_header      Host $host;\r\n                proxy_http_version    1.1;\r\n                proxy_set_header      Upgrade $http_upgrade;\r\n                proxy_set_header      Connection $connection_upgrade;\r\n        }\r\n}\r\n```\r\n\r\nSee http://nginx.org/en/docs/http/websocket.html",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/372527409",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-372527409",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 372527409,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjUyNzQwOQ==",
    "user": {
      "login": "phariel",
      "id": 549967,
      "node_id": "MDQ6VXNlcjU0OTk2Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549967?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/phariel",
      "html_url": "https://github.com/phariel",
      "followers_url": "https://api.github.com/users/phariel/followers",
      "following_url": "https://api.github.com/users/phariel/following{/other_user}",
      "gists_url": "https://api.github.com/users/phariel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/phariel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/phariel/subscriptions",
      "organizations_url": "https://api.github.com/users/phariel/orgs",
      "repos_url": "https://api.github.com/users/phariel/repos",
      "events_url": "https://api.github.com/users/phariel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/phariel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-13T02:39:39Z",
    "updated_at": "2018-03-13T02:39:39Z",
    "author_association": "NONE",
    "body": "@wintermelons it's awesome, you saved my day!",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/375591892",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-375591892",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 375591892,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTU5MTg5Mg==",
    "user": {
      "login": "csymeonides",
      "id": 10628370,
      "node_id": "MDQ6VXNlcjEwNjI4Mzcw",
      "avatar_url": "https://avatars.githubusercontent.com/u/10628370?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/csymeonides",
      "html_url": "https://github.com/csymeonides",
      "followers_url": "https://api.github.com/users/csymeonides/followers",
      "following_url": "https://api.github.com/users/csymeonides/following{/other_user}",
      "gists_url": "https://api.github.com/users/csymeonides/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/csymeonides/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/csymeonides/subscriptions",
      "organizations_url": "https://api.github.com/users/csymeonides/orgs",
      "repos_url": "https://api.github.com/users/csymeonides/repos",
      "events_url": "https://api.github.com/users/csymeonides/events{/privacy}",
      "received_events_url": "https://api.github.com/users/csymeonides/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-23T09:25:20Z",
    "updated_at": "2018-03-23T09:25:20Z",
    "author_association": "NONE",
    "body": "I'm still getting the same error even with the solution by @qqrs above. I'm running the notebook server in gcloud with https and OAuth2. Has anyone managed to get it to work in a similar setup?",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/387051839",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-387051839",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 387051839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzA1MTgzOQ==",
    "user": {
      "login": "nikAizuddin",
      "id": 4245729,
      "node_id": "MDQ6VXNlcjQyNDU3Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4245729?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikAizuddin",
      "html_url": "https://github.com/nikAizuddin",
      "followers_url": "https://api.github.com/users/nikAizuddin/followers",
      "following_url": "https://api.github.com/users/nikAizuddin/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikAizuddin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikAizuddin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikAizuddin/subscriptions",
      "organizations_url": "https://api.github.com/users/nikAizuddin/orgs",
      "repos_url": "https://api.github.com/users/nikAizuddin/repos",
      "events_url": "https://api.github.com/users/nikAizuddin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikAizuddin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-07T12:40:22Z",
    "updated_at": "2018-05-07T12:40:22Z",
    "author_association": "NONE",
    "body": "Using `proxy_set_header Host $host;` doesn't work for me. I got \"API request failed (403): Forbidden\" when I clicked \"Stop My Server\" button. Error from Jupyterhub log:\r\n**403 DELETE /hub/api/users/tester/server (@10.10.102.28)**\r\n\r\nChanging to `proxy_set_header Host $http_host;` does solve my issue. So now when I clicked the button, Jupyterhub produce log output with:\r\n**204 DELETE /hub/api/users/tester/server (tester@10.10.102.28)**",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/419059791",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-419059791",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 419059791,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTA1OTc5MQ==",
    "user": {
      "login": "reichardtj",
      "id": 36728079,
      "node_id": "MDQ6VXNlcjM2NzI4MDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/36728079?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reichardtj",
      "html_url": "https://github.com/reichardtj",
      "followers_url": "https://api.github.com/users/reichardtj/followers",
      "following_url": "https://api.github.com/users/reichardtj/following{/other_user}",
      "gists_url": "https://api.github.com/users/reichardtj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reichardtj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reichardtj/subscriptions",
      "organizations_url": "https://api.github.com/users/reichardtj/orgs",
      "repos_url": "https://api.github.com/users/reichardtj/repos",
      "events_url": "https://api.github.com/users/reichardtj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reichardtj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-06T11:27:05Z",
    "updated_at": "2018-09-06T11:27:05Z",
    "author_association": "NONE",
    "body": "I'm running Jupyter behind an ssl reverse proxy. \r\n@wintermelons solution did work for me, when accessing the notebook from Firefox - but not from Safari where I cannot connect to the notebook kernel and get a 401 error on the web socket call:\r\n```\r\n[Error] WebSocket connection to 'wss://somedomain.com/notebooks/api/kernels/6343900b-12f3-4245-81cd-8c1e3642d6b5/channels?session_id=DF7A59E736A041458B79DD76D45AC89B' failed: Unexpected response code: 401\r\n```\r\n\r\nMaybe that does explain the different results people are reporting here.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/784907857",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-784907857",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 784907857,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NDkwNzg1Nw==",
    "user": {
      "login": "372046933",
      "id": 1251167,
      "node_id": "MDQ6VXNlcjEyNTExNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1251167?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/372046933",
      "html_url": "https://github.com/372046933",
      "followers_url": "https://api.github.com/users/372046933/followers",
      "following_url": "https://api.github.com/users/372046933/following{/other_user}",
      "gists_url": "https://api.github.com/users/372046933/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/372046933/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/372046933/subscriptions",
      "organizations_url": "https://api.github.com/users/372046933/orgs",
      "repos_url": "https://api.github.com/users/372046933/repos",
      "events_url": "https://api.github.com/users/372046933/events{/privacy}",
      "received_events_url": "https://api.github.com/users/372046933/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-24T08:40:08Z",
    "updated_at": "2021-02-24T08:40:08Z",
    "author_association": "NONE",
    "body": "I have to set `proxy_read_timeout` to a large value like 86400, otherwise, browser console continues reconnecting. https://github.com/jupyterhub/jupyterhub/issues/3368",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/785626473",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-785626473",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 785626473,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NTYyNjQ3Mw==",
    "user": {
      "login": "372046933",
      "id": 1251167,
      "node_id": "MDQ6VXNlcjEyNTExNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1251167?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/372046933",
      "html_url": "https://github.com/372046933",
      "followers_url": "https://api.github.com/users/372046933/followers",
      "following_url": "https://api.github.com/users/372046933/following{/other_user}",
      "gists_url": "https://api.github.com/users/372046933/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/372046933/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/372046933/subscriptions",
      "organizations_url": "https://api.github.com/users/372046933/orgs",
      "repos_url": "https://api.github.com/users/372046933/repos",
      "events_url": "https://api.github.com/users/372046933/events{/privacy}",
      "received_events_url": "https://api.github.com/users/372046933/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-25T05:37:26Z",
    "updated_at": "2021-02-25T05:37:26Z",
    "author_association": "NONE",
    "body": "> I have to set `proxy_read_timeout` to a large value like 86400, otherwise, browser console continues reconnecting. [jupyterhub/jupyterhub#3368](https://github.com/jupyterhub/jupyterhub/issues/3368)\r\n\r\n`proxy_read_timeout = 60s` is enough. Because the ping-pong interval is 30s",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/841731718",
    "html_url": "https://github.com/jupyter/notebook/issues/625#issuecomment-841731718",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/625",
    "id": 841731718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MTczMTcxOA==",
    "user": {
      "login": "CUBERLEON",
      "id": 12598936,
      "node_id": "MDQ6VXNlcjEyNTk4OTM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/12598936?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CUBERLEON",
      "html_url": "https://github.com/CUBERLEON",
      "followers_url": "https://api.github.com/users/CUBERLEON/followers",
      "following_url": "https://api.github.com/users/CUBERLEON/following{/other_user}",
      "gists_url": "https://api.github.com/users/CUBERLEON/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CUBERLEON/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CUBERLEON/subscriptions",
      "organizations_url": "https://api.github.com/users/CUBERLEON/orgs",
      "repos_url": "https://api.github.com/users/CUBERLEON/repos",
      "events_url": "https://api.github.com/users/CUBERLEON/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CUBERLEON/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-15T22:03:55Z",
    "updated_at": "2021-05-15T22:03:55Z",
    "author_association": "NONE",
    "body": "For me `proxy_set_header  Origin  \"\";` solved the problem (SSL on).\r\nReference (in the comments): https://stackoverflow.com/a/23912400",
    "performed_via_github_app": null
  }
]
