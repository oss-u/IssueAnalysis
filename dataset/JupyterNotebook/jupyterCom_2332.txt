[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/288743272",
    "html_url": "https://github.com/jupyter/notebook/issues/2332#issuecomment-288743272",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2332",
    "id": 288743272,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODc0MzI3Mg==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-23T14:49:46Z",
    "updated_at": "2017-03-23T14:49:46Z",
    "author_association": "MEMBER",
    "body": "There's a confusing detail about the tokens that we don't try to explain in any of the UI. But you've spotted it ;-). If you're interested in more than *it's intentional*, read on...\r\n\r\nThere were a couple of reasons we added token auth. One was a complex but potentially really nasty (remote code execution) attack called DNS rebinding. The other was a simpler but more limited attack: because network sockets are shared systemwide, anyone who can log into the same computer (e.g. via ssh) while you're running a notebook server without authentication could connect to it and run code as you, potentially letting them read secret files, or modify your files.\r\n\r\nToken authentication mostly works without the user needing to do much extra - it generates a token automatically and passes it to the browser it launches. It's still caused some headaches, but it's practical enough (and the DNS rebinding attack was nasty enough) that we enabled it by default.\r\n\r\nHowever, for the cross-user attack, generating a token and passing it to the browser leaves a hole in the security. When we pass a URL to the browser, we launch a browser process with the URL as a command-line argument. But command line arguments are not private - at least on some systems, a non-privileged user can see the arguments of processes run by another user (on Linux, run `ps -ef` in a terminal). So a malicious user on the same system may be able to scan processes you have started, find the browser process started by Jupyter, extract the token and use it to connect to your server. This is even more problematic now that it seems to be secure.\r\n\r\nYou may have guessed where we're going. The token you see in your browser is an extra one-time token; once your browser has used it to authenticate (swapping it for an auth cookie), it's invalidated, so connecting another browser with the same token won't work. Technically, there's still a very small chink in the armour: once we start the browser process, the attacker could try to steal the token and use it to authenticate before your browser does. But a) that's hopefully quite hard to do, and b) you have a chance to notice that something is amiss when your browser fails to authenticate.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/289164506",
    "html_url": "https://github.com/jupyter/notebook/issues/2332#issuecomment-289164506",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2332",
    "id": 289164506,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTE2NDUwNg==",
    "user": {
      "login": "sparseinference",
      "id": 1734614,
      "node_id": "MDQ6VXNlcjE3MzQ2MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1734614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sparseinference",
      "html_url": "https://github.com/sparseinference",
      "followers_url": "https://api.github.com/users/sparseinference/followers",
      "following_url": "https://api.github.com/users/sparseinference/following{/other_user}",
      "gists_url": "https://api.github.com/users/sparseinference/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sparseinference/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sparseinference/subscriptions",
      "organizations_url": "https://api.github.com/users/sparseinference/orgs",
      "repos_url": "https://api.github.com/users/sparseinference/repos",
      "events_url": "https://api.github.com/users/sparseinference/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sparseinference/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-24T23:12:14Z",
    "updated_at": "2017-03-24T23:12:14Z",
    "author_association": "NONE",
    "body": "OK - thanks very much for the explanation.  I didn't realize that the token printed to the terminal was an extra token for one-time use.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/289237903",
    "html_url": "https://github.com/jupyter/notebook/issues/2332#issuecomment-289237903",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2332",
    "id": 289237903,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTIzNzkwMw==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-25T20:36:11Z",
    "updated_at": "2017-03-25T20:36:11Z",
    "author_association": "MEMBER",
    "body": "The one printed to the terminal is the reusable one - the one that we open a browser with is the one-time token.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/289559183",
    "html_url": "https://github.com/jupyter/notebook/issues/2332#issuecomment-289559183",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2332",
    "id": 289559183,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTU1OTE4Mw==",
    "user": {
      "login": "sparseinference",
      "id": 1734614,
      "node_id": "MDQ6VXNlcjE3MzQ2MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1734614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sparseinference",
      "html_url": "https://github.com/sparseinference",
      "followers_url": "https://api.github.com/users/sparseinference/followers",
      "following_url": "https://api.github.com/users/sparseinference/following{/other_user}",
      "gists_url": "https://api.github.com/users/sparseinference/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sparseinference/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sparseinference/subscriptions",
      "organizations_url": "https://api.github.com/users/sparseinference/orgs",
      "repos_url": "https://api.github.com/users/sparseinference/repos",
      "events_url": "https://api.github.com/users/sparseinference/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sparseinference/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-27T19:27:40Z",
    "updated_at": "2017-03-27T19:27:40Z",
    "author_association": "NONE",
    "body": "@takluyver   Got it. Thanks!",
    "performed_via_github_app": null
  }
]
