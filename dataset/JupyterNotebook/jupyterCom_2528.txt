[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/466499454",
    "html_url": "https://github.com/jupyter/notebook/issues/2528#issuecomment-466499454",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2528",
    "id": 466499454,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjQ5OTQ1NA==",
    "user": {
      "login": "krassowski",
      "id": 5832902,
      "node_id": "MDQ6VXNlcjU4MzI5MDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5832902?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krassowski",
      "html_url": "https://github.com/krassowski",
      "followers_url": "https://api.github.com/users/krassowski/followers",
      "following_url": "https://api.github.com/users/krassowski/following{/other_user}",
      "gists_url": "https://api.github.com/users/krassowski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krassowski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krassowski/subscriptions",
      "organizations_url": "https://api.github.com/users/krassowski/orgs",
      "repos_url": "https://api.github.com/users/krassowski/repos",
      "events_url": "https://api.github.com/users/krassowski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krassowski/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-22T18:33:22Z",
    "updated_at": "2019-02-22T18:33:22Z",
    "author_association": "NONE",
    "body": "A workaround:\r\n\r\n```python\r\nfrom rpy2.robjects import r\r\nfrom IPython import get_ipython\r\n\r\ndef rpy2_competer(ipython, event):\r\n    query = event.line.strip().split()[-1]\r\n    suggestions = []\r\n    all_r_symbols = r('sapply(search(), ls)')\r\n    for environment, symbols in all_r_symbols.items():\r\n        for _, symbol in symbols.items():\r\n            if symbol.startswith(query):\r\n                suggestions.append(symbol)\r\n    return suggestions\r\n\r\nipython = get_ipython()\r\nipython.set_hook('complete_command', rpy2_competer, re_key='.*')\r\n```\r\n\r\nFor me that's a great help when using R ggplot in Python projects. Unfortunately, it is not R-cells specific, but does the job for me. Tested in JupyterLab only, though I am not aware why it would not work in Notebook. If anyone would be interested in building upon my snippet, I consider it CC0.\r\n\r\nFor cell specific completion, custom completer API would need to be extended to provide full text of the cell (in the `event` object), but I guess this discussion belongs more to IPython. I've also looked into passing `type='R'` information (this may be actually better, as we sometimes refer to the R-variables from python cells using the rpy2 objects - so it would allow user to decide if the completion is relevant there) but it seems that `Completer` class is experimental and reserved for Jedi completion.\r\n\r\nCC @Carreau - I've seen that you've recently updated the IPython's [completer.py](https://github.com/ipython/ipython/blob/master/IPython/core/completer.py) file, just wanted to let you know that there is a use-case for passing more information for custom completers. Not sure if I should discuss this there or open an issue in IPython repository.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/765818159",
    "html_url": "https://github.com/jupyter/notebook/issues/2528#issuecomment-765818159",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2528",
    "id": 765818159,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NTgxODE1OQ==",
    "user": {
      "login": "angelito127",
      "id": 49767409,
      "node_id": "MDQ6VXNlcjQ5NzY3NDA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/49767409?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/angelito127",
      "html_url": "https://github.com/angelito127",
      "followers_url": "https://api.github.com/users/angelito127/followers",
      "following_url": "https://api.github.com/users/angelito127/following{/other_user}",
      "gists_url": "https://api.github.com/users/angelito127/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/angelito127/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/angelito127/subscriptions",
      "organizations_url": "https://api.github.com/users/angelito127/orgs",
      "repos_url": "https://api.github.com/users/angelito127/repos",
      "events_url": "https://api.github.com/users/angelito127/events{/privacy}",
      "received_events_url": "https://api.github.com/users/angelito127/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-23T02:16:44Z",
    "updated_at": "2021-01-25T19:05:59Z",
    "author_association": "NONE",
    "body": "@krassowski, thanks for the code. It works when running this on a cell in Jupyter Notebook. Like you, I also use R ggplot in python projects, but the completion is only for the main functions. For instance, in the following cell, I show where completion is and is not allowed:\r\n\r\n%%R\r\nlibrary [COMPLETION] (ggplot2)\r\nggplot [COMPLETION] (data [NO COMPLETION] = df1 [NO COMPLETION] , mapping [NO COMPLETION] = aes [NO COMPLETION] (...) + geom_point [COMPLETION] ()\r\n\r\nBasically, partial completion is allowed, and since this issue has more than one year, I am interested in any solution that has been raised over time.\r\n\r\nThanks.\r\n\r\n\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/766096457",
    "html_url": "https://github.com/jupyter/notebook/issues/2528#issuecomment-766096457",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2528",
    "id": 766096457,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NjA5NjQ1Nw==",
    "user": {
      "login": "krassowski",
      "id": 5832902,
      "node_id": "MDQ6VXNlcjU4MzI5MDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5832902?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krassowski",
      "html_url": "https://github.com/krassowski",
      "followers_url": "https://api.github.com/users/krassowski/followers",
      "following_url": "https://api.github.com/users/krassowski/following{/other_user}",
      "gists_url": "https://api.github.com/users/krassowski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krassowski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krassowski/subscriptions",
      "organizations_url": "https://api.github.com/users/krassowski/orgs",
      "repos_url": "https://api.github.com/users/krassowski/repos",
      "events_url": "https://api.github.com/users/krassowski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krassowski/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-23T15:30:57Z",
    "updated_at": "2021-01-23T16:15:41Z",
    "author_association": "NONE",
    "body": "I think that the GitHub editor might have changed how the code that you intended to show is displayed; I think that if you use the code formatting option it might become clearer.\r\n\r\nAnyways: yes, there was a development in this space indeed: [jupyterlab-lsp](https://github.com/krassowski/jupyterlab-lsp) allows to autocomplete, show diagnostics and many more in the `%%R` and `%R` cells (and other %% cells too!). Now, it was initially developed for JupyterLab, but with the advent of [`jupyterlab-classic`](https://github.com/jtpio/jupyterlab-classic) that closely resembles the Jupyter Notebook interface it might be good enough for you. Here is a demo:\r\n\r\n![rpy2-demo](https://user-images.githubusercontent.com/5832902/105606096-3f619b80-5d8f-11eb-994b-caf801f9765f.gif)\r\n\r\nSome notes on the demo:\r\n- I have `continiousHinting` enabled which is disabled by default (so you can decide if you want the hints to show up after every keystroke or just after <kbd>Tab</kbd> and other trigger characters such as dot; the trigger character depend on the language)\r\n- The documentation panel can be disabled; it is available for Python and Julia and will be also available for R completions [very soon](https://github.com/krassowski/jupyterlab-lsp/pull/487)\r\n- There are different icon themes for the completer, I am using the material one, after installation you will get a more colourful theme by default (as always, you can customize it in the settings)",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/767047427",
    "html_url": "https://github.com/jupyter/notebook/issues/2528#issuecomment-767047427",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2528",
    "id": 767047427,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NzA0NzQyNw==",
    "user": {
      "login": "angelito127",
      "id": 49767409,
      "node_id": "MDQ6VXNlcjQ5NzY3NDA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/49767409?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/angelito127",
      "html_url": "https://github.com/angelito127",
      "followers_url": "https://api.github.com/users/angelito127/followers",
      "following_url": "https://api.github.com/users/angelito127/following{/other_user}",
      "gists_url": "https://api.github.com/users/angelito127/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/angelito127/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/angelito127/subscriptions",
      "organizations_url": "https://api.github.com/users/angelito127/orgs",
      "repos_url": "https://api.github.com/users/angelito127/repos",
      "events_url": "https://api.github.com/users/angelito127/events{/privacy}",
      "received_events_url": "https://api.github.com/users/angelito127/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-25T19:12:51Z",
    "updated_at": "2021-01-25T19:12:51Z",
    "author_association": "NONE",
    "body": "@krassowski Thanks a lot! It works really well with jupyter Lab. In addition to install the extension, I also uninstalled jedi since it causes a problem with autocompletion in Python Language (this is an issue I read on Github a couple of weeks ago). There was no change when working with jupyter notebook and the same virtual environment, but with Lab it is working.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/767069169",
    "html_url": "https://github.com/jupyter/notebook/issues/2528#issuecomment-767069169",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2528",
    "id": 767069169,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NzA2OTE2OQ==",
    "user": {
      "login": "krassowski",
      "id": 5832902,
      "node_id": "MDQ6VXNlcjU4MzI5MDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5832902?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krassowski",
      "html_url": "https://github.com/krassowski",
      "followers_url": "https://api.github.com/users/krassowski/followers",
      "following_url": "https://api.github.com/users/krassowski/following{/other_user}",
      "gists_url": "https://api.github.com/users/krassowski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krassowski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krassowski/subscriptions",
      "organizations_url": "https://api.github.com/users/krassowski/orgs",
      "repos_url": "https://api.github.com/users/krassowski/repos",
      "events_url": "https://api.github.com/users/krassowski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krassowski/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-25T19:46:14Z",
    "updated_at": "2021-01-25T19:46:14Z",
    "author_association": "NONE",
    "body": "Great to hear it works well for you! If you have any improvement ideas please let us know on in the extension repository.\r\n\r\n> uninstalled jedi since it causes a problem with autocompletion in Python Language\r\n\r\nIf you pin jedi to 0.17.2 it should work fine. Just do not install jedi 0.18 just yet.\r\n\r\n> There was no change when working with jupyter notebook\r\n\r\nThe LSP extension does not suport the old Jupyter Notebook, but you can get a similar experience when using the proof-of-concept [`jupyterlab-classic`](https://github.com/jtpio/jupyterlab-classic) that closely resembles the Jupyter Notebook interface; jupyterlab-classic is supported by the LSP extension.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/777918003",
    "html_url": "https://github.com/jupyter/notebook/issues/2528#issuecomment-777918003",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2528",
    "id": 777918003,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NzkxODAwMw==",
    "user": {
      "login": "angelito127",
      "id": 49767409,
      "node_id": "MDQ6VXNlcjQ5NzY3NDA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/49767409?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/angelito127",
      "html_url": "https://github.com/angelito127",
      "followers_url": "https://api.github.com/users/angelito127/followers",
      "following_url": "https://api.github.com/users/angelito127/following{/other_user}",
      "gists_url": "https://api.github.com/users/angelito127/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/angelito127/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/angelito127/subscriptions",
      "organizations_url": "https://api.github.com/users/angelito127/orgs",
      "repos_url": "https://api.github.com/users/angelito127/repos",
      "events_url": "https://api.github.com/users/angelito127/events{/privacy}",
      "received_events_url": "https://api.github.com/users/angelito127/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-12T01:58:57Z",
    "updated_at": "2021-02-12T01:58:57Z",
    "author_association": "NONE",
    "body": "@krassowski  I have been working with the extension and the packages I needed for a while. However, I was not able to obtain the full benefits of autocompletion (probably because I uninstalled jedi completely). To improve that, I tried jedi=0.17.1 and 0.17.2, but the environments turn inconsistent. \r\n\r\nAfter that experience, I think that lots of warnings and not fully autocomplete is an uncomfortable way to work, but since you have an environment with rpy2, pandas, jupyterlab-lsp, and jedi working together providing you a complete functionality, would you be nice enough to share the list of packages in a requirements.txt format (via pip freeze or conda create ) to be able to set up an environment from it which also works as it is supposed to do? \r\n\r\nI think that it would be really helpful. Otherwise, is there any platform where environments are shared in a similar way by the users? ",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/777921359",
    "html_url": "https://github.com/jupyter/notebook/issues/2528#issuecomment-777921359",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2528",
    "id": 777921359,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NzkyMTM1OQ==",
    "user": {
      "login": "krassowski",
      "id": 5832902,
      "node_id": "MDQ6VXNlcjU4MzI5MDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5832902?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krassowski",
      "html_url": "https://github.com/krassowski",
      "followers_url": "https://api.github.com/users/krassowski/followers",
      "following_url": "https://api.github.com/users/krassowski/following{/other_user}",
      "gists_url": "https://api.github.com/users/krassowski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krassowski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krassowski/subscriptions",
      "organizations_url": "https://api.github.com/users/krassowski/orgs",
      "repos_url": "https://api.github.com/users/krassowski/repos",
      "events_url": "https://api.github.com/users/krassowski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krassowski/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-12T02:08:09Z",
    "updated_at": "2021-02-12T02:12:18Z",
    "author_association": "NONE",
    "body": "A clean installation using the installation instructions from the lsp extension readme should provide you with a working environment. I do not have one magic requirements.txt as we do tests it across several Python versions and operating systems where exact packages and versions vary; we are confident that it works across that many configurations.\n\nIf it does not work for you in a clean environment please do open a [bug report](https://github.com/krassowski/jupyterlab-lsp/issues/new?assignees=&labels=&template=bug_report.md) on the jupyterlab-lsp extension repository providing your environment details as detailed in the template.",
    "performed_via_github_app": null
  }
]
