[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/197272610",
    "html_url": "https://github.com/jupyter/notebook/pull/1221#issuecomment-197272610",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1221",
    "id": 197272610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzI3MjYxMA==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-16T11:22:02Z",
    "updated_at": "2016-03-16T11:22:02Z",
    "author_association": "MEMBER",
    "body": "From to the docs, this will retry up to three times if the exit status is not zero. Given the frequency of intermittent failures, that's probably reasonable, though it will make things substantially slower when there is a real, replicable failure.\n\nMy bigger concern is that we might introduce a real bug which causes a test failure ~50% of the time. With the current test regime, we'd have a good chance of seeing that quickly, but if failing tests are automatically re-run, it can hide much better. Of course, if we always manually re-run failing tests anyway...\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/197273169",
    "html_url": "https://github.com/jupyter/notebook/pull/1221#issuecomment-197273169",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1221",
    "id": 197273169,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzI3MzE2OQ==",
    "user": {
      "login": "blink1073",
      "id": 2096628,
      "node_id": "MDQ6VXNlcjIwOTY2Mjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2096628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/blink1073",
      "html_url": "https://github.com/blink1073",
      "followers_url": "https://api.github.com/users/blink1073/followers",
      "following_url": "https://api.github.com/users/blink1073/following{/other_user}",
      "gists_url": "https://api.github.com/users/blink1073/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/blink1073/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/blink1073/subscriptions",
      "organizations_url": "https://api.github.com/users/blink1073/orgs",
      "repos_url": "https://api.github.com/users/blink1073/repos",
      "events_url": "https://api.github.com/users/blink1073/events{/privacy}",
      "received_events_url": "https://api.github.com/users/blink1073/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-16T11:24:09Z",
    "updated_at": "2016-03-16T11:24:09Z",
    "author_association": "MEMBER",
    "body": "You could use the `true || echo \"hello\"` syntax to only ever retry once.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/197309777",
    "html_url": "https://github.com/jupyter/notebook/pull/1221#issuecomment-197309777",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1221",
    "id": 197309777,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzMwOTc3Nw==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-16T12:56:04Z",
    "updated_at": "2016-03-16T12:56:04Z",
    "author_association": "MEMBER",
    "body": "@takluyver your point is certainly valid, but examining my own (bad) behavior I often don't even look at the failure before relaunching it once. The only time I do that is if I see that the same test group failed on multiple versions of Python, which suggests a real bug.\n\nI dusted off my (possibly wrong) dice-rolling probabilities from ages ago to check out how likely a failure needs to be for this to hide it: https://nbviewer.jupyter.org/gist/minrk/a87b89aa46a24ea77b0f\n\nIf there's a failure in a single test group 50% of the time, the fact that we are running each group twice (py2, py3) means that these retries will reduce that from at-least-one failure in 75% of builds to at-least-one failure in 25% of builds, which is still noticeable. If it's affecting all the js test groups equally, it would still produce a single failure 65% of the time, as opposed to the current 99.6% of the time.\n\nWhat this approach hides most is low-probability failures. For instance, a js failure affecting all js test groups 10% of the time will only show up 1% of the time after this change, rather than 60% of the time now.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/197332010",
    "html_url": "https://github.com/jupyter/notebook/pull/1221#issuecomment-197332010",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1221",
    "id": 197332010,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzMzMjAxMA==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-16T13:33:34Z",
    "updated_at": "2016-03-16T13:33:34Z",
    "author_association": "MEMBER",
    "body": ":+1: for modelling it in a notebook :-). Those are roughly the numbers I was thinking of, though my point would have been better made by a low-probability failure.\n\nHowever, I agree with you - even though I do generally scan over the output from a failure before restarting it, the non-determinate ones are most likely to fail with a timeout, and I see enough of those that I'll probably restart it without much thought. And we have our nightly runs on Jenkins to increase the visibility of real errors as well.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/197887481",
    "html_url": "https://github.com/jupyter/notebook/pull/1221#issuecomment-197887481",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1221",
    "id": 197887481,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5Nzg4NzQ4MQ==",
    "user": {
      "login": "willingc",
      "id": 2680980,
      "node_id": "MDQ6VXNlcjI2ODA5ODA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2680980?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/willingc",
      "html_url": "https://github.com/willingc",
      "followers_url": "https://api.github.com/users/willingc/followers",
      "following_url": "https://api.github.com/users/willingc/following{/other_user}",
      "gists_url": "https://api.github.com/users/willingc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/willingc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/willingc/subscriptions",
      "organizations_url": "https://api.github.com/users/willingc/orgs",
      "repos_url": "https://api.github.com/users/willingc/repos",
      "events_url": "https://api.github.com/users/willingc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/willingc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-17T13:52:22Z",
    "updated_at": "2016-03-17T13:52:22Z",
    "author_association": "MEMBER",
    "body": "I'm going to go ahead and merge this since we can change if needed down the road.\n\n@takluyver Where are the Jenkins logs kept?\n\nHas anyone tried https://docs.travis-ci.com/user/common-build-problems/#Troubleshooting-Locally-in-a-Docker-Image with the JS builds?\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/197910268",
    "html_url": "https://github.com/jupyter/notebook/pull/1221#issuecomment-197910268",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1221",
    "id": 197910268,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzkxMDI2OA==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-17T14:45:44Z",
    "updated_at": "2016-03-17T14:45:44Z",
    "author_association": "MEMBER",
    "body": "You can see Jenkins logs on https://jenkins.jupyter.org/ . If you're keen, you can also subscribe to the [ipython-build mailing list](http://lists.ipython.org/listinfo.cgi/ipython-build-ipython.org) to get messages when builds fail. Not all jobs are set up to send emails, though.\n\nI think our main issue with Travis is that certain operations are much slower on Travis than in any realistic use case, so things time out even when we set the wait time really generously, and it hits what are technically race conditions that would never normally come up.\n",
    "performed_via_github_app": null
  }
]
