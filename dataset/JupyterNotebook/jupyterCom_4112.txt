[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/431693893",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-431693893",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 431693893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTY5Mzg5Mw==",
    "user": {
      "login": "Carreau",
      "id": 335567,
      "node_id": "MDQ6VXNlcjMzNTU2Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/335567?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Carreau",
      "html_url": "https://github.com/Carreau",
      "followers_url": "https://api.github.com/users/Carreau/followers",
      "following_url": "https://api.github.com/users/Carreau/following{/other_user}",
      "gists_url": "https://api.github.com/users/Carreau/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Carreau/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Carreau/subscriptions",
      "organizations_url": "https://api.github.com/users/Carreau/orgs",
      "repos_url": "https://api.github.com/users/Carreau/repos",
      "events_url": "https://api.github.com/users/Carreau/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Carreau/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-21T18:51:12Z",
    "updated_at": "2018-10-21T18:51:12Z",
    "author_association": "MEMBER",
    "body": "That looks reasonable to me. ",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/649828766",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-649828766",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 649828766,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0OTgyODc2Ng==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-25T21:32:37Z",
    "updated_at": "2020-06-25T21:32:37Z",
    "author_association": "MEMBER",
    "body": "This change appears to have introduced a fairly significant (IMO) regression issue for multi-env python configurations in that the active env from within a launched terminal will vary from the notebook server's env for folks that have multiple envs.\r\n\r\nThis will result in issues where users would like to perform some actions relative to their notebook's environment, but find that changes performed via a terminal session are not applied (due to the difference in environments).  I understand this issue is in direct conflict with the purpose of this PR, but I think this warrants some discussion.\r\n\r\nIssues that have been created since the merge/release of this PR include #4877 and #5247 - besides the fact that I started looking into this because I had a user encountering this very issue.\r\n\r\n@dmikushin, @Carreau, @minrk (or anyone else) - I'd like to hear your opinions and how we might alleviate this.  \r\n- Should this be something addressed in docs?  \r\n- Should this be something made configurable?  \r\n- Should this change be backed out?\r\n\r\nMy feeling is that the original behavior should be the default - with a login shell behavior offered as an option (to non-Windows users).",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/649839242",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-649839242",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 649839242,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0OTgzOTI0Mg==",
    "user": {
      "login": "dmikushin",
      "id": 5672874,
      "node_id": "MDQ6VXNlcjU2NzI4NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5672874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dmikushin",
      "html_url": "https://github.com/dmikushin",
      "followers_url": "https://api.github.com/users/dmikushin/followers",
      "following_url": "https://api.github.com/users/dmikushin/following{/other_user}",
      "gists_url": "https://api.github.com/users/dmikushin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dmikushin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dmikushin/subscriptions",
      "organizations_url": "https://api.github.com/users/dmikushin/orgs",
      "repos_url": "https://api.github.com/users/dmikushin/repos",
      "events_url": "https://api.github.com/users/dmikushin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dmikushin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-25T22:00:18Z",
    "updated_at": "2020-06-25T22:00:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @kevin-bates My logic is to make Jupyter terminal to behave as a normal Linux terminal. When you open a new terminal window in Linux (or actually in Windows as well), the default environment profile is loaded from the user settings. And - yes, whenever I change a variable locally wrt that specific terminal, it does not affect any other terminal settings.\r\n\r\nIn terminals, multiple envs are usually configured by sourcing additional scripts. For instance, on supercomputers we often need to switch environment from one compiler version to another. But this still co-exists well with the fact that we do have some default compiler brought by \"-l\", not just nothing. But I'm not sure if this answers your question, please let me know.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/649846869",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-649846869",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 649846869,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0OTg0Njg2OQ==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-25T22:20:49Z",
    "updated_at": "2020-06-25T22:20:49Z",
    "author_association": "MEMBER",
    "body": "Thank you for your response @dmikushin.  I understand the change and, for the most part, think it's good.  But in contrast with existing behavior, it does present a regression issue that I don't think was caught during the change's introduction. \r\n\r\nIn hindsight, this should have been an opt-in behavior since it breaks expected functionality - that being that the environment is consistent with a) what notebook was started within, and b) what kernels are running within.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/649853159",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-649853159",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 649853159,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0OTg1MzE1OQ==",
    "user": {
      "login": "dmikushin",
      "id": 5672874,
      "node_id": "MDQ6VXNlcjU2NzI4NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5672874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dmikushin",
      "html_url": "https://github.com/dmikushin",
      "followers_url": "https://api.github.com/users/dmikushin/followers",
      "following_url": "https://api.github.com/users/dmikushin/following{/other_user}",
      "gists_url": "https://api.github.com/users/dmikushin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dmikushin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dmikushin/subscriptions",
      "organizations_url": "https://api.github.com/users/dmikushin/orgs",
      "repos_url": "https://api.github.com/users/dmikushin/repos",
      "events_url": "https://api.github.com/users/dmikushin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dmikushin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-25T22:40:23Z",
    "updated_at": "2020-06-25T22:40:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@kevin-bates Why do you think that the state-of-art behavior (as explained above) should be opt-in, and counter-logical behavior should stay the default simply because it was historically first introduced in Jupyter?\r\n\r\nPlease kindly correct me if I'm wrong. Is it correct that your are asking that every new Jupyter terminal should inherit the state of the previous ones? That does not make sense to me and eventually leads to garbage state.\r\n\r\nThe worst thing about removing \"-l\" is: everything that is not in the /usr/bin is ignored, such as NVIDIA CUDA compiler, editor profiles, shell configs, etc etc. The default terminal becomes just worthless. This implies that Jupyter has to be ugly by default, which it not what I want.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/649882525",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-649882525",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 649882525,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0OTg4MjUyNQ==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-26T00:28:24Z",
    "updated_at": "2020-06-26T00:28:24Z",
    "author_association": "MEMBER",
    "body": "> The worst thing about removing \"-l\" is: everything that is not in the /usr/bin is ignored, such as NVIDIA CUDA compiler, editor profiles, shell configs, etc etc. The default terminal becomes just worthless.\r\n\r\nHmm - yes, I would agree that only having `PATH=/usr/bin` would be worthless, but that's not what I see.  If I go back to Notebook 5.7.8, my PATH prior to launching Notebook is:\r\n```\r\nPATH=/opt/anaconda3/envs/clean/bin:/opt/anaconda3/condabin:/usr/local/opt/scala@2.11/bin:/Users/kbates/bin:/opt/anaconda3/bin:/usr/local/mongodb/bin:/opt/spark-2.4.3-bin-hadoop2.7/bin:/usr/local/opt/scala@2.11/bin:/usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/usr/local/MacGPG2/bin:/Library/Apple/usr/bin:/bin\r\n```\r\nAnd from within a launched terminal, my PATH is:\r\n```\r\nPATH=/opt/anaconda3/envs/clean/bin:/opt/anaconda3/condabin:/usr/local/opt/scala@2.11/bin:/Users/kbates/bin:/opt/anaconda3/bin:/usr/local/mongodb/bin:/opt/spark-2.4.3-bin-hadoop2.7/bin:/usr/local/opt/scala@2.11/bin:/usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/usr/local/MacGPG2/bin:/Library/Apple/usr/bin:/bin\r\n```\r\nIn fact, the two environments are nearly identical and I don't find it useless at all. I like the fact that I have access to the same commands I had access to prior to launching notebook.\r\n\r\n>Is it correct that your are asking that every new Jupyter terminal should inherit the state of the previous ones?\r\n\r\nMy take is that the typical use case for using a terminal within a notebook environment is that it enables a mechanism that the user (data scientist, analyst, whomever) can operate outside of their notebook but _relative to their notebook's environment_.  The use of the login shell breaks that for users that use multiple environments - which most data scientists do. So, to your question, I'm saying that every new Jupyter terminal should inherit the state of the environment in which the notebook server was launched.\r\n\r\nSince notebook has tens of thousands of users, we (maintainers) do indeed give precedence to current behaviors and strive to minimize situations that introduce breaking changes (i.e., regressions) at the expense of new behaviors.\r\n\r\nThe problem here is that a user within a terminal session now first has to realize they're not in the correct env, then try to determine which environment they must activate in order to do their work.  I'm not aware of how to do that other than remembering the env.\r\n\r\nI'm sorry I raised what I felt was an important issue.  We have a regression here, but given this was introduced on a major release boundary, there is some wiggle-room in that many would claim breaking changes can occur across such boundaries.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/650026783",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-650026783",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 650026783,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDAyNjc4Mw==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-26T07:31:04Z",
    "updated_at": "2020-06-26T07:31:04Z",
    "author_association": "MEMBER",
    "body": "I think an important distinction in what the logical default is depends on the context in which a notebook is launched. I think in most non-jupyterhub cases, it is launched from an existing user shell that has already been initialized with all the login shell profile-loading, etc. In these cases, invoking the login shell from an existing login shell is at best redundant, and at worst reverting env customization that might have happened after initializing the shell, which is the issue @kevin-bates is bringing. Please correct me if I'm wrong about that on either side.\r\n\r\nThe alternative scenario, when the notebook is launched in a more \"raw\" environment certainly comes up a lot in JupyterHub, or in \"app launchers\" that might start the notebook directly via systemd/supervisor/init/app launcher/etc. without going through a login shell first. This is the case where the terminal env is weird and empty, and a login shell is ~always preferable. Another solution to these cases is to use a login shell as a wrapper for launching the notebook. This is actually what I prefer to do in JupyterHub deployments, since it ensures consistent behavior for not just the terminals, but also notebooks if there is any relevant env there.\r\n\r\nWith that in mind, I'd support making terminals starting the login shell an opt-in behavior instead of opt-out. The problem we have right now is that it isn't even opt-out—it's unconditional (for non-Windows), so it can't be overridden. At the very least, we should make it opt-out, but I think opt-in is more often the right choice. If there's a reasonable way to detect if no login shell has been invoked (hard to be rigorous since things like `shopt -q login_shell` are shell-dependent and aren't inherited by subprocesses), then we could make the default to load a login shell in those cases. But I don't know a good way to check for that better than a suspiciously empty $PATH.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/650191881",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-650191881",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 650191881,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDE5MTg4MQ==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-26T13:53:04Z",
    "updated_at": "2020-06-26T13:53:04Z",
    "author_association": "MEMBER",
    "body": "@minrk - thank you for your response.  I believe it sufficiently reflects my concern here.  \r\n\r\nI appreciate you mentioning Hub and launcher applications and I suspect that must be the kind of environment @dmikushin  is running within (Dmitry, could you confirm?).  A solution proposed by @dlukes in https://github.com/jupyter/notebook/issues/5247#issue-569574064 is to use the `SHLVL` env to determine if a login shell should be used.  Since I don't use Hub or Launcher apps, it didn't dawn on me how SHLVL could ever be < 1 - which is what triggers the addition of `-l` in this case, but now I realize that Hub/Launcher scenarios introduce that case exactly.  That strikes me as a better way to go here as it enacts the login shell when it is most needed.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/650231842",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-650231842",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 650231842,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDIzMTg0Mg==",
    "user": {
      "login": "dmikushin",
      "id": 5672874,
      "node_id": "MDQ6VXNlcjU2NzI4NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5672874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dmikushin",
      "html_url": "https://github.com/dmikushin",
      "followers_url": "https://api.github.com/users/dmikushin/followers",
      "following_url": "https://api.github.com/users/dmikushin/following{/other_user}",
      "gists_url": "https://api.github.com/users/dmikushin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dmikushin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dmikushin/subscriptions",
      "organizations_url": "https://api.github.com/users/dmikushin/orgs",
      "repos_url": "https://api.github.com/users/dmikushin/repos",
      "events_url": "https://api.github.com/users/dmikushin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dmikushin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-26T15:10:21Z",
    "updated_at": "2020-06-26T15:13:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "The simplest amateur usecase is to launch an instance of jupyter-notebook from within the desktop session, just as a desktop application. In this case, login shell is already present, as the desktop user has to log in. On the other hand, cloud computing service deployment implies there is no user session whatsoever; Jupyter is coming as a HTTPS service, and its backends are running as daemons (init.d, systemd, etc). Here the login shell switch is essential, as it does not exist by any other means.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/650238297",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-650238297",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 650238297,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDIzODI5Nw==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-26T15:22:22Z",
    "updated_at": "2020-06-26T15:22:22Z",
    "author_association": "MEMBER",
    "body": "Yes - I understand.  So it sounds like your use case is purely relative to these kinds of Hub/Launcher/Cloud services environments.\r\n\r\nAre you in a position to try the simple addition referenced in the previously-linked comment that checks `SHLVL`?  I think that may be a great way forward here.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/650353668",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-650353668",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 650353668,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDM1MzY2OA==",
    "user": {
      "login": "Zsailer",
      "id": 2791223,
      "node_id": "MDQ6VXNlcjI3OTEyMjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2791223?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Zsailer",
      "html_url": "https://github.com/Zsailer",
      "followers_url": "https://api.github.com/users/Zsailer/followers",
      "following_url": "https://api.github.com/users/Zsailer/following{/other_user}",
      "gists_url": "https://api.github.com/users/Zsailer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Zsailer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Zsailer/subscriptions",
      "organizations_url": "https://api.github.com/users/Zsailer/orgs",
      "repos_url": "https://api.github.com/users/Zsailer/repos",
      "events_url": "https://api.github.com/users/Zsailer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Zsailer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-26T19:20:26Z",
    "updated_at": "2020-06-26T19:20:26Z",
    "author_association": "MEMBER",
    "body": "I agree with @minrk here. First, at the very least, this should be configurable. The answer to whether it should be opt-in vs. opt-out question is a bit less clear in my mind. We've now introduced a \"breaking-change\" either way we go (since we have major release with each state). Choosing a default will break *someone's* setup. That said, I'd lean towards making this opt-in. \r\n\r\nLeveraging `SHLVL` to find a source shell is a clever fix. It makes me a little bit nervous to implicitly set a `use_login_shell` trait, since you could get different behavior when testing terminals locally vs. deploying a system with terminals created from nothing. But in the strict case where `SHLVL==0`, it seems like a login shell is the appropriate default.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/652072354",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-652072354",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 652072354,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjA3MjM1NA==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-30T22:08:53Z",
    "updated_at": "2020-06-30T22:08:53Z",
    "author_association": "MEMBER",
    "body": "> But in the strict case where SHLVL==0, it seems like a login shell is the appropriate default.\r\n\r\nI agree.  It's also a great compromise.\r\n\r\nNow that we know how the two experiences (retaining current env or having nothing in env) come about I'd like to see this addressed by 6.1 GA and have added it to #5423.\r\n\r\n@dlukes - are you able to provide a PR per your previous https://github.com/jupyter/notebook/issues/5247#issue-569574064?  If we haven't heard back in a few days, I'll go ahead and add the PR with you as a co-author (assuming that will be okay).",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/652231475",
    "html_url": "https://github.com/jupyter/notebook/pull/4112#issuecomment-652231475",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4112",
    "id": 652231475,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjIzMTQ3NQ==",
    "user": {
      "login": "dlukes",
      "id": 2734517,
      "node_id": "MDQ6VXNlcjI3MzQ1MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2734517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dlukes",
      "html_url": "https://github.com/dlukes",
      "followers_url": "https://api.github.com/users/dlukes/followers",
      "following_url": "https://api.github.com/users/dlukes/following{/other_user}",
      "gists_url": "https://api.github.com/users/dlukes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dlukes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dlukes/subscriptions",
      "organizations_url": "https://api.github.com/users/dlukes/orgs",
      "repos_url": "https://api.github.com/users/dlukes/repos",
      "events_url": "https://api.github.com/users/dlukes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dlukes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-01T06:59:07Z",
    "updated_at": "2020-07-01T06:59:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sure, I’d love to :) Thanks for picking up on this!",
    "performed_via_github_app": null
  }
]
