[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/804231108",
    "html_url": "https://github.com/jupyter/notebook/issues/5318#issuecomment-804231108",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5318",
    "id": 804231108,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNDIzMTEwOA==",
    "user": {
      "login": "soichih",
      "id": 923896,
      "node_id": "MDQ6VXNlcjkyMzg5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923896?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/soichih",
      "html_url": "https://github.com/soichih",
      "followers_url": "https://api.github.com/users/soichih/followers",
      "following_url": "https://api.github.com/users/soichih/following{/other_user}",
      "gists_url": "https://api.github.com/users/soichih/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/soichih/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soichih/subscriptions",
      "organizations_url": "https://api.github.com/users/soichih/orgs",
      "repos_url": "https://api.github.com/users/soichih/repos",
      "events_url": "https://api.github.com/users/soichih/events{/privacy}",
      "received_events_url": "https://api.github.com/users/soichih/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-22T17:00:21Z",
    "updated_at": "2021-03-22T17:00:21Z",
    "author_association": "NONE",
    "body": "I am having a similar issue on jupyterlab v2.1.1.\r\n\r\nWhen a user try to rename or open a folder with names like \"Untitled Folder\". The API call fails with `400 Bad Request`.\r\n\r\nOn the server side, I see messages like this\r\n\r\n```\r\n[I 16:57:03.374 NotebookApp] Malformed HTTP message from 10.0.0.11: Malformed HTTP request line\r\n```\r\n\r\nI am exposing jupyterhub through iframe, and through nginx proxy with the following rules.\r\n\r\n```\r\n    location ~* ^/ipython/(?<port>\\d+)/(?<url>.*) {\r\n        set $upstream 10.0.0.26;\r\n        proxy_pass http://$upstream:$port/ipython/$port/$url$is_args$args;\r\n\r\n        #let warehouse client test the proxy state\r\n        add_header Access-Control-Allow-Origin \"*\";\r\n        add_header Access-Control-Allow-Methods \"OPTIONS\";\r\n\r\n        proxy_http_version 1.1;\r\n        proxy_set_header Upgrade $http_upgrade;\r\n        proxy_set_header Connection \"upgrade\";\r\n        proxy_set_header Origin \"\";\r\n\r\n        client_max_body_size 0;\r\n    }\r\n```\r\n\r\nI am not sure if this issue is specific to how I am exposing our jupyterhub (or happens to all users to jupyterlab?) ",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/821998543",
    "html_url": "https://github.com/jupyter/notebook/issues/5318#issuecomment-821998543",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5318",
    "id": 821998543,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMTk5ODU0Mw==",
    "user": {
      "login": "Hoeze",
      "id": 1200058,
      "node_id": "MDQ6VXNlcjEyMDAwNTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1200058?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hoeze",
      "html_url": "https://github.com/Hoeze",
      "followers_url": "https://api.github.com/users/Hoeze/followers",
      "following_url": "https://api.github.com/users/Hoeze/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hoeze/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hoeze/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hoeze/subscriptions",
      "organizations_url": "https://api.github.com/users/Hoeze/orgs",
      "repos_url": "https://api.github.com/users/Hoeze/repos",
      "events_url": "https://api.github.com/users/Hoeze/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hoeze/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-18T14:16:21Z",
    "updated_at": "2021-04-18T14:17:13Z",
    "author_association": "NONE",
    "body": "Same issue here. I have this problem from Jupyterlab <1 to latest Jupyterlab.\r\nI'm using Jupyterhub beind a reverse proxy.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/823898048",
    "html_url": "https://github.com/jupyter/notebook/issues/5318#issuecomment-823898048",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5318",
    "id": 823898048,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzg5ODA0OA==",
    "user": {
      "login": "th3darkang3l",
      "id": 48793226,
      "node_id": "MDQ6VXNlcjQ4NzkzMjI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/48793226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/th3darkang3l",
      "html_url": "https://github.com/th3darkang3l",
      "followers_url": "https://api.github.com/users/th3darkang3l/followers",
      "following_url": "https://api.github.com/users/th3darkang3l/following{/other_user}",
      "gists_url": "https://api.github.com/users/th3darkang3l/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/th3darkang3l/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/th3darkang3l/subscriptions",
      "organizations_url": "https://api.github.com/users/th3darkang3l/orgs",
      "repos_url": "https://api.github.com/users/th3darkang3l/repos",
      "events_url": "https://api.github.com/users/th3darkang3l/events{/privacy}",
      "received_events_url": "https://api.github.com/users/th3darkang3l/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-21T08:54:21Z",
    "updated_at": "2021-04-21T08:54:21Z",
    "author_association": "NONE",
    "body": "> Same issue here. I have this problem from Jupyterlab <1 to latest Jupyterlab.\r\n> I'm using Jupyterhub beind a reverse proxy.\r\n\r\nSame issue, but today I realized that removing the NE (No Escape) flag from the RewriteRule solved the issue for me.\r\n\r\nJupyterLab behind httpd revese proxy.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/823926955",
    "html_url": "https://github.com/jupyter/notebook/issues/5318#issuecomment-823926955",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5318",
    "id": 823926955,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzkyNjk1NQ==",
    "user": {
      "login": "Hoeze",
      "id": 1200058,
      "node_id": "MDQ6VXNlcjEyMDAwNTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1200058?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hoeze",
      "html_url": "https://github.com/Hoeze",
      "followers_url": "https://api.github.com/users/Hoeze/followers",
      "following_url": "https://api.github.com/users/Hoeze/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hoeze/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hoeze/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hoeze/subscriptions",
      "organizations_url": "https://api.github.com/users/Hoeze/orgs",
      "repos_url": "https://api.github.com/users/Hoeze/repos",
      "events_url": "https://api.github.com/users/Hoeze/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hoeze/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-21T09:39:38Z",
    "updated_at": "2021-04-21T09:41:43Z",
    "author_association": "NONE",
    "body": "> Same issue, but today I realized that removing the NE (No Escape) flag from the RewriteRule solved the issue for me.\r\n> \r\n> JupyterLab behind httpd revese proxy.\r\n\r\nPerfect, that's the solution!\r\nOur apache config now:\r\n```\r\n<Location /jupyter>\r\n        # dont allow http only without any SSL\r\n        RewriteEngine On\r\n        RewriteCond %{HTTPS} off\r\n        RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]\r\n\r\n        # Preserve Host header to avoid cross-origin problems\r\n        ProxyPreserveHost On\r\n\r\n        ProxyPass        \"http://<host:port>/jupyter\" keepalive=On\r\n        ProxyPassReverse \"http://<host:port>/jupyter\"\r\n        ProxyPassReverse \"https://%{HTTP_HOST}/jupyter\"\r\n        SetEnv proxy-chain-auth On\r\n\r\n        # JupyterHub\r\n        RewriteCond %{HTTP:Connection} Upgrade [NC]\r\n        RewriteCond %{HTTP:Upgrade} websocket [NC]\r\n\r\n        RewriteRule /jupyter/(.*) ws://<host:port>/jupyter/$1 [P,L,NE]\r\n        RewriteRule /jupyter/(.*) http://<host:port>/jupyter/$1 [P,L,NE]\r\n\r\n</Location>\r\n```\r\n\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/839866072",
    "html_url": "https://github.com/jupyter/notebook/issues/5318#issuecomment-839866072",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5318",
    "id": 839866072,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzOTg2NjA3Mg==",
    "user": {
      "login": "savire",
      "id": 5865221,
      "node_id": "MDQ6VXNlcjU4NjUyMjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5865221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/savire",
      "html_url": "https://github.com/savire",
      "followers_url": "https://api.github.com/users/savire/followers",
      "following_url": "https://api.github.com/users/savire/following{/other_user}",
      "gists_url": "https://api.github.com/users/savire/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/savire/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/savire/subscriptions",
      "organizations_url": "https://api.github.com/users/savire/orgs",
      "repos_url": "https://api.github.com/users/savire/repos",
      "events_url": "https://api.github.com/users/savire/events{/privacy}",
      "received_events_url": "https://api.github.com/users/savire/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-12T15:28:15Z",
    "updated_at": "2021-05-12T15:28:15Z",
    "author_association": "NONE",
    "body": "For those using NGINX I've successfully setup my project using this setting:\r\n\r\n```\r\n location ~* ^/(.*) {\r\n        set $modified_uri $request_uri;\r\n\r\n        if ($modified_uri ~ \"^/([\\w]{2})(/.*)\") {\r\n                set $modified_uri $1;\r\n        }\r\n\r\n        proxy_pass http://127.0.0.1:18000/$modified_uri;\r\n}\r\n```\r\n\r\nHope it will help someone.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/840042993",
    "html_url": "https://github.com/jupyter/notebook/issues/5318#issuecomment-840042993",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5318",
    "id": 840042993,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDA0Mjk5Mw==",
    "user": {
      "login": "soichih",
      "id": 923896,
      "node_id": "MDQ6VXNlcjkyMzg5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923896?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/soichih",
      "html_url": "https://github.com/soichih",
      "followers_url": "https://api.github.com/users/soichih/followers",
      "following_url": "https://api.github.com/users/soichih/following{/other_user}",
      "gists_url": "https://api.github.com/users/soichih/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/soichih/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soichih/subscriptions",
      "organizations_url": "https://api.github.com/users/soichih/orgs",
      "repos_url": "https://api.github.com/users/soichih/repos",
      "events_url": "https://api.github.com/users/soichih/events{/privacy}",
      "received_events_url": "https://api.github.com/users/soichih/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-12T19:32:44Z",
    "updated_at": "2021-05-12T19:32:44Z",
    "author_association": "NONE",
    "body": "I was able to fix this simply by passing $request_uri to the proxy_pass - it turns out $request_uri preserves the original URL encoding so it won't corrupt the URL. So this is not really jupyter issue - but web server (proxy) issue.\r\n\r\n```\r\n    location ~* ^/ipython/(?<port>\\d+)/(?<url>.*) {\r\n        proxy_pass http://127.0.0.1:$port$request_uri;\r\n\r\n```",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/840323493",
    "html_url": "https://github.com/jupyter/notebook/issues/5318#issuecomment-840323493",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5318",
    "id": 840323493,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDMyMzQ5Mw==",
    "user": {
      "login": "savire",
      "id": 5865221,
      "node_id": "MDQ6VXNlcjU4NjUyMjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5865221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/savire",
      "html_url": "https://github.com/savire",
      "followers_url": "https://api.github.com/users/savire/followers",
      "following_url": "https://api.github.com/users/savire/following{/other_user}",
      "gists_url": "https://api.github.com/users/savire/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/savire/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/savire/subscriptions",
      "organizations_url": "https://api.github.com/users/savire/orgs",
      "repos_url": "https://api.github.com/users/savire/repos",
      "events_url": "https://api.github.com/users/savire/events{/privacy}",
      "received_events_url": "https://api.github.com/users/savire/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-13T05:54:54Z",
    "updated_at": "2021-05-13T05:54:54Z",
    "author_association": "NONE",
    "body": "> I was able to fix this simply by passing $request_uri to the proxy_pass - it turns out $request_uri preserves the original URL encoding so it won't corrupt the URL. So this is not really jupyter issue - but web server (proxy) issue.\r\n> \r\n> ```\r\n>     location ~* ^/ipython/(?<port>\\d+)/(?<url>.*) {\r\n>         proxy_pass http://127.0.0.1:$port$request_uri;\r\n> ```\r\n\r\nYea that's what I've exactly put it there mate. The rest is depends on your project needs. ",
    "performed_via_github_app": null
  }
]
