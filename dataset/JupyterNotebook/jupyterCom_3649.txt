[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/392810057",
    "html_url": "https://github.com/jupyter/notebook/issues/3649#issuecomment-392810057",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3649",
    "id": 392810057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjgxMDA1Nw==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-29T15:02:12Z",
    "updated_at": "2018-05-29T15:02:12Z",
    "author_association": "MEMBER",
    "body": "Can you try to figure out what differences in the environment might be relevant?",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/392814486",
    "html_url": "https://github.com/jupyter/notebook/issues/3649#issuecomment-392814486",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3649",
    "id": 392814486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjgxNDQ4Ng==",
    "user": {
      "login": "alealv",
      "id": 9395091,
      "node_id": "MDQ6VXNlcjkzOTUwOTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9395091?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alealv",
      "html_url": "https://github.com/alealv",
      "followers_url": "https://api.github.com/users/alealv/followers",
      "following_url": "https://api.github.com/users/alealv/following{/other_user}",
      "gists_url": "https://api.github.com/users/alealv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alealv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alealv/subscriptions",
      "organizations_url": "https://api.github.com/users/alealv/orgs",
      "repos_url": "https://api.github.com/users/alealv/repos",
      "events_url": "https://api.github.com/users/alealv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alealv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-29T15:13:41Z",
    "updated_at": "2018-05-29T15:14:36Z",
    "author_association": "NONE",
    "body": "I think maybe **LD_LIBRARY_PATH** and **LIBRARY_PATH**, because the have the paths to */opt/intel/tbb*\r\n\r\n```\r\n\"LD_LIBRARY_PATH\": \"/opt/intel/compilers_and_libraries_2018.2.199/linux/tbb/lib/intel64/gcc4.7:/opt/intel/compilers_and_libraries_2018.2.199/linux/tbb/lib/intel64/gcc4.7:/opt/intel/compilers_and_libraries_2018.2.199/linux/ipp/lib/intel64:/opt/intel/compilers_and_libraries_2018.2.199/linux/daal/lib/intel64_lin:/opt/intel/compilers_and_libraries_2018.2.199/linux/daal/../tbb/lib/intel64_lin/gcc4.4:/opt/intel/compilers_and_libraries_2018.2.199/linux/tbb/lib/intel64_lin/gcc4.7:/opt/intel/compilers_and_libraries_2018.2.199/linux/compiler/lib/intel64_lin:/opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin:/usr/local/lib:/usr/local/cuda/lib64:/usr/local/computecpp/lib:/usr/local/nccl/lib:\",\r\n```\r\n\r\nand \r\n\r\n```\r\n\"LIBRARY_PATH\": \"/opt/intel/compilers_and_libraries_2018.2.199/linux/tbb/lib/intel64/gcc4.7:/opt/intel/compilers_and_libraries_2018.2.199/linux/tbb/lib/intel64/gcc4.7:/opt/intel/compilers_and_libraries_2018.2.199/linux/ipp/lib/intel64:/opt/intel/compilers_and_libraries_2018.2.199/linux/daal/lib/intel64_lin:/opt/intel/compilers_and_libraries_2018.2.199/linux/daal/../tbb/lib/intel64_lin/gcc4.4:/opt/intel/compilers_and_libraries_2018.2.199/linux/tbb/lib/intel64_lin/gcc4.7:/opt/intel/compilers_and_libraries_2018.2.199/linux/compiler/lib/intel64_lin:/opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin\",\r\n```\r\n\r\nBut I've already tried loading all the env variables to the jupyter and the problem persists.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/392817603",
    "html_url": "https://github.com/jupyter/notebook/issues/3649#issuecomment-392817603",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3649",
    "id": 392817603,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjgxNzYwMw==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-29T15:22:17Z",
    "updated_at": "2018-05-29T15:22:17Z",
    "author_association": "MEMBER",
    "body": "Those do sound likely to be relevant. Maybe they need to be set before the kernel process starts. How are you starting Jupyter?",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/392865387",
    "html_url": "https://github.com/jupyter/notebook/issues/3649#issuecomment-392865387",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3649",
    "id": 392865387,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Mjg2NTM4Nw==",
    "user": {
      "login": "alealv",
      "id": 9395091,
      "node_id": "MDQ6VXNlcjkzOTUwOTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9395091?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alealv",
      "html_url": "https://github.com/alealv",
      "followers_url": "https://api.github.com/users/alealv/followers",
      "following_url": "https://api.github.com/users/alealv/following{/other_user}",
      "gists_url": "https://api.github.com/users/alealv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alealv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alealv/subscriptions",
      "organizations_url": "https://api.github.com/users/alealv/orgs",
      "repos_url": "https://api.github.com/users/alealv/repos",
      "events_url": "https://api.github.com/users/alealv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alealv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-29T17:26:25Z",
    "updated_at": "2018-05-29T17:26:55Z",
    "author_association": "NONE",
    "body": "Because I use Jupyter-hub, It starts as a service and I log in with my user. We've also tried to add the env-variables to the Spawner whitelist, but it didn't work.\r\n\r\n```\r\nc.Spawner.env_keep` = ['PATH', 'PYTHONPATH', 'CONDA_ROOT', 'CONDA_DEFAULT_ENV', 'VIRTUAL_ENV', 'LANG', 'LC_ALL', 'LD_LIBRARY_PATH', 'LIBRARY_PATH']\r\n```",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/392919150",
    "html_url": "https://github.com/jupyter/notebook/issues/3649#issuecomment-392919150",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3649",
    "id": 392919150,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjkxOTE1MA==",
    "user": {
      "login": "alealv",
      "id": 9395091,
      "node_id": "MDQ6VXNlcjkzOTUwOTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9395091?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alealv",
      "html_url": "https://github.com/alealv",
      "followers_url": "https://api.github.com/users/alealv/followers",
      "following_url": "https://api.github.com/users/alealv/following{/other_user}",
      "gists_url": "https://api.github.com/users/alealv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alealv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alealv/subscriptions",
      "organizations_url": "https://api.github.com/users/alealv/orgs",
      "repos_url": "https://api.github.com/users/alealv/repos",
      "events_url": "https://api.github.com/users/alealv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alealv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-29T19:46:36Z",
    "updated_at": "2018-05-29T19:46:36Z",
    "author_association": "NONE",
    "body": "Ok, we solved the problem with a very ugly hack. We just paste the environment variables to the jupyter-hub script and now is working.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/396066949",
    "html_url": "https://github.com/jupyter/notebook/issues/3649#issuecomment-396066949",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3649",
    "id": 396066949,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjA2Njk0OQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-10T17:34:58Z",
    "updated_at": "2018-06-10T17:34:58Z",
    "author_association": "MEMBER",
    "body": "Closing because this is an environment variable issue rather than a bug in notebook. Maybe the spawner you're using needs to make some changes to how it handles environment variables, but it's tricky to get this sort of thing right 100% of the time - e.g. some modifications only take effect in an interactive terminal.",
    "performed_via_github_app": null
  }
]
