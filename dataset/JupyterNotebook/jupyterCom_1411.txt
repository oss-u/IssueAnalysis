[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/216049990",
    "html_url": "https://github.com/jupyter/notebook/issues/1411#issuecomment-216049990",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1411",
    "id": 216049990,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjA0OTk5MA==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-01T15:23:33Z",
    "updated_at": "2016-05-01T15:23:33Z",
    "author_association": "MEMBER",
    "body": "What system are you on? That directory should be created when you log in - it's getting the path from `$XDG_RUNTIME_DIR`.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/216050151",
    "html_url": "https://github.com/jupyter/notebook/issues/1411#issuecomment-216050151",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1411",
    "id": 216050151,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjA1MDE1MQ==",
    "user": {
      "login": "satra",
      "id": 184063,
      "node_id": "MDQ6VXNlcjE4NDA2Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/184063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/satra",
      "html_url": "https://github.com/satra",
      "followers_url": "https://api.github.com/users/satra/followers",
      "following_url": "https://api.github.com/users/satra/following{/other_user}",
      "gists_url": "https://api.github.com/users/satra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/satra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/satra/subscriptions",
      "organizations_url": "https://api.github.com/users/satra/orgs",
      "repos_url": "https://api.github.com/users/satra/repos",
      "events_url": "https://api.github.com/users/satra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/satra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-01T15:26:38Z",
    "updated_at": "2016-05-01T15:26:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "on centos 7.2, using a slurm terminal (using `srun --pty bash`)\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/216050499",
    "html_url": "https://github.com/jupyter/notebook/issues/1411#issuecomment-216050499",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1411",
    "id": 216050499,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjA1MDQ5OQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-01T15:32:57Z",
    "updated_at": "2016-05-01T15:32:57Z",
    "author_association": "MEMBER",
    "body": "I would guess that either:\n- Whatever is logging you in is setting that environment variable without creating the directory. This is just broken.\n- You are doing something that switches from one user to another without clearing environment variables, so it's inheriting the XDG_RUNTIME_DIR from the user you were before. If this is the case, probably the most sensible thing is to unset XDG_RUNTIME_DIR before running the notebook. It will use a fallback.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/216050945",
    "html_url": "https://github.com/jupyter/notebook/issues/1411#issuecomment-216050945",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1411",
    "id": 216050945,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjA1MDk0NQ==",
    "user": {
      "login": "satra",
      "id": 184063,
      "node_id": "MDQ6VXNlcjE4NDA2Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/184063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/satra",
      "html_url": "https://github.com/satra",
      "followers_url": "https://api.github.com/users/satra/followers",
      "following_url": "https://api.github.com/users/satra/following{/other_user}",
      "gists_url": "https://api.github.com/users/satra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/satra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/satra/subscriptions",
      "organizations_url": "https://api.github.com/users/satra/orgs",
      "repos_url": "https://api.github.com/users/satra/repos",
      "events_url": "https://api.github.com/users/satra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/satra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-01T15:42:10Z",
    "updated_at": "2016-05-01T15:42:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "@takluyver - thanks for the feedback. \n\ni know we have upgraded SLURM since i last ran jupyter-notebook on the system, but this was nominally fine before that. it does turn out that the particular directory does not exist when i use `srun` from SLURM to get an interactive terminal but does exist if i simply ssh in.\n\nunsetting the variable works fine. perhaps jupyter-notebook could trap the `OSError` and use the fallback method?\n\ni will check with the SLURM folks as to how they see the variable implemented through an interactive terminal job.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/216241572",
    "html_url": "https://github.com/jupyter/notebook/issues/1411#issuecomment-216241572",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1411",
    "id": 216241572,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjI0MTU3Mg==",
    "user": {
      "login": "satra",
      "id": 184063,
      "node_id": "MDQ6VXNlcjE4NDA2Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/184063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/satra",
      "html_url": "https://github.com/satra",
      "followers_url": "https://api.github.com/users/satra/followers",
      "following_url": "https://api.github.com/users/satra/following{/other_user}",
      "gists_url": "https://api.github.com/users/satra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/satra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/satra/subscriptions",
      "organizations_url": "https://api.github.com/users/satra/orgs",
      "repos_url": "https://api.github.com/users/satra/repos",
      "events_url": "https://api.github.com/users/satra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/satra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-02T13:52:21Z",
    "updated_at": "2016-05-02T13:52:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "@takluyver - quick question - has the XDG_RUNTIME_DIR been in use for a while, or was this a recent change (as in within the last 2 months)?\n\nthe reason i ask is that i was able to fire up jupyter-notebooks fine within our SLURM environment. and the SLURM mailing list suggested that SLURM does not support XDG.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/216247761",
    "html_url": "https://github.com/jupyter/notebook/issues/1411#issuecomment-216247761",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1411",
    "id": 216247761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjI0Nzc2MQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-02T14:18:55Z",
    "updated_at": "2016-05-02T14:18:55Z",
    "author_association": "MEMBER",
    "body": "We have been using XDG_RUNTIME_DIR for some time, since the switch to Jupyter.\n\nIt's fine if it's not supported, but if the directory is not created, the environment variable for it should not be set. Setting it implies that whatever was handling the login supported it.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/216248255",
    "html_url": "https://github.com/jupyter/notebook/issues/1411#issuecomment-216248255",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1411",
    "id": 216248255,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjI0ODI1NQ==",
    "user": {
      "login": "satra",
      "id": 184063,
      "node_id": "MDQ6VXNlcjE4NDA2Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/184063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/satra",
      "html_url": "https://github.com/satra",
      "followers_url": "https://api.github.com/users/satra/followers",
      "following_url": "https://api.github.com/users/satra/following{/other_user}",
      "gists_url": "https://api.github.com/users/satra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/satra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/satra/subscriptions",
      "organizations_url": "https://api.github.com/users/satra/orgs",
      "repos_url": "https://api.github.com/users/satra/repos",
      "events_url": "https://api.github.com/users/satra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/satra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-02T14:20:56Z",
    "updated_at": "2016-05-02T14:20:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "yes, SLURM carries over local environment variables and since i logged in via ssh to the head node that variable was set. since you have been using it for a while, i have a suspicion that SLURM changed how remote logins were processed. i'm closing this for now. but will post any updates i get from the SLURM folks.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/216249802",
    "html_url": "https://github.com/jupyter/notebook/issues/1411#issuecomment-216249802",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1411",
    "id": 216249802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjI0OTgwMg==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-02T14:26:41Z",
    "updated_at": "2016-05-02T14:26:41Z",
    "author_association": "MEMBER",
    "body": "It seems like a misfeature to carry over arbitrary environment variables, as they could well be wrong. However, if that's what it's doing, I think that `unset XDG_RUNTIME_DIR` before starting the notebook should make it work.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/221832493",
    "html_url": "https://github.com/jupyter/notebook/issues/1411#issuecomment-221832493",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/1411",
    "id": 221832493,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTgzMjQ5Mw==",
    "user": {
      "login": "eburgueno",
      "id": 7798712,
      "node_id": "MDQ6VXNlcjc3OTg3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7798712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eburgueno",
      "html_url": "https://github.com/eburgueno",
      "followers_url": "https://api.github.com/users/eburgueno/followers",
      "following_url": "https://api.github.com/users/eburgueno/following{/other_user}",
      "gists_url": "https://api.github.com/users/eburgueno/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eburgueno/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eburgueno/subscriptions",
      "organizations_url": "https://api.github.com/users/eburgueno/orgs",
      "repos_url": "https://api.github.com/users/eburgueno/repos",
      "events_url": "https://api.github.com/users/eburgueno/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eburgueno/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-26T10:14:52Z",
    "updated_at": "2016-05-26T10:56:21Z",
    "author_association": "NONE",
    "body": "Hello, we just came across this same issue but with a different job scheduler (OpenLava). We reported it in their [mailing list](https://groups.google.com/forum/#!topic/openlava-users/CFaD5pGMfw0) as well.\n\n> It seems like a misfeature to carry over arbitrary environment variables, as they could well be wrong.\n\nI did want to raise it here too however, as passing the entire set of environment variables has been pretty much standard behaviour for most job schedulers out there, AFAIK. In general, it's the SysAdmin job to ensure that all servers in a cluster are consistent so that the environment is portable. There's probably good reasons why job schedulers do not open a login session for each job they run in execution nodes, but that's just a guess.\n\n(edit)\n~~I am unsure whether this means the XDG specification is broken when working with HPC-type environments, or if there is actually scope for the application (Jupyter Notebook in this case) to be diligent in checking `XDG_RUNTIME_DIR` is indeed writable.~~\n\nActually, on second read of [the specification](https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html) it does seem that the onus is on the application to ensure the directories are actually writable.\n\nFrom the \"Referencing this specification\" section:\n\n> If, when attempting to write a file, the destination directory is non-existant an attempt should be made to create it with permission 0700. If the destination directory exists already the permissions should not be changed. The application should be prepared to handle the case where the file could not be written, either because the directory was non-existant and could not be created, or for any other reason. In such case it may chose to present an error message to the user.\n\nRight now, the notebook presents an error to the user and crashes.\n(/edit)\nI think falling back to non-XDG behaviour instead of crashing would provide a better user experience.\n",
    "performed_via_github_app": null
  }
]
