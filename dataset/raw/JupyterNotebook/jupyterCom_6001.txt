[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/791888259",
    "html_url": "https://github.com/jupyter/notebook/issues/6001#issuecomment-791888259",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/6001",
    "id": 791888259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MTg4ODI1OQ==",
    "user": {
      "login": "kohlerjl",
      "id": 1612775,
      "node_id": "MDQ6VXNlcjE2MTI3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1612775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kohlerjl",
      "html_url": "https://github.com/kohlerjl",
      "followers_url": "https://api.github.com/users/kohlerjl/followers",
      "following_url": "https://api.github.com/users/kohlerjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/kohlerjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kohlerjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kohlerjl/subscriptions",
      "organizations_url": "https://api.github.com/users/kohlerjl/orgs",
      "repos_url": "https://api.github.com/users/kohlerjl/repos",
      "events_url": "https://api.github.com/users/kohlerjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kohlerjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-06T07:17:10Z",
    "updated_at": "2021-03-06T07:17:10Z",
    "author_association": "NONE",
    "body": "[conda_list.txt](https://github.com/jupyter/notebook/files/6094915/conda_list.txt)\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/792034016",
    "html_url": "https://github.com/jupyter/notebook/issues/6001#issuecomment-792034016",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/6001",
    "id": 792034016,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MjAzNDAxNg==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-06T19:26:46Z",
    "updated_at": "2021-03-06T19:26:46Z",
    "author_association": "MEMBER",
    "body": "This message is related to some fairly recent changes to [`nbformat`](https://github.com/jupyter/nbformat) that introduce [_cell id_ metadata](https://nbformat.readthedocs.io/en/latest/format_description.html#cell-ids) for each notebook cell.  In this case, the validation logic is encountering a duplicate cell-id that was previously, and randomly, generated `'waiting-opening'` and encountering that same cell-id later in the notebook.  It's strange that this occurs for the same cell-id value and is as if the corrected-to value is not getting persisted.  I'm unable to reproduce this, but I suspect there are a few factors in play here.\r\n\r\nI'm cc-ing @MSeal for comment as to what might be going on and how best to proceed (as I'd rather not recommend downgrading).",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/792036399",
    "html_url": "https://github.com/jupyter/notebook/issues/6001#issuecomment-792036399",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/6001",
    "id": 792036399,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MjAzNjM5OQ==",
    "user": {
      "login": "MSeal",
      "id": 1863892,
      "node_id": "MDQ6VXNlcjE4NjM4OTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1863892?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MSeal",
      "html_url": "https://github.com/MSeal",
      "followers_url": "https://api.github.com/users/MSeal/followers",
      "following_url": "https://api.github.com/users/MSeal/following{/other_user}",
      "gists_url": "https://api.github.com/users/MSeal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MSeal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MSeal/subscriptions",
      "organizations_url": "https://api.github.com/users/MSeal/orgs",
      "repos_url": "https://api.github.com/users/MSeal/repos",
      "events_url": "https://api.github.com/users/MSeal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MSeal/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-06T19:34:33Z",
    "updated_at": "2021-03-06T19:34:33Z",
    "author_association": "NONE",
    "body": "Sorry I accidentally hit the close button. ðŸ‘€ on this now",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/792039647",
    "html_url": "https://github.com/jupyter/notebook/issues/6001#issuecomment-792039647",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/6001",
    "id": 792039647,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MjAzOTY0Nw==",
    "user": {
      "login": "MSeal",
      "id": 1863892,
      "node_id": "MDQ6VXNlcjE4NjM4OTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1863892?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MSeal",
      "html_url": "https://github.com/MSeal",
      "followers_url": "https://api.github.com/users/MSeal/followers",
      "following_url": "https://api.github.com/users/MSeal/following{/other_user}",
      "gists_url": "https://api.github.com/users/MSeal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MSeal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MSeal/subscriptions",
      "organizations_url": "https://api.github.com/users/MSeal/orgs",
      "repos_url": "https://api.github.com/users/MSeal/repos",
      "events_url": "https://api.github.com/users/MSeal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MSeal/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-06T19:45:00Z",
    "updated_at": "2021-03-06T19:45:00Z",
    "author_association": "NONE",
    "body": "I also am struggling to reproduce the event with a very similar dependency list. Even if I manually force cell ids to be invalid / equal the notebook server corrects it with version 6.2.0 before it ever get to the validation error reported here.\r\n\r\n@kohlerjl could you post a notebook exhibiting the behavior? I am wondering if something in the file structure will lend a clue as to why the replaced cell-id is not being fixed.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/792359518",
    "html_url": "https://github.com/jupyter/notebook/issues/6001#issuecomment-792359518",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/6001",
    "id": 792359518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MjM1OTUxOA==",
    "user": {
      "login": "kohlerjl",
      "id": 1612775,
      "node_id": "MDQ6VXNlcjE2MTI3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1612775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kohlerjl",
      "html_url": "https://github.com/kohlerjl",
      "followers_url": "https://api.github.com/users/kohlerjl/followers",
      "following_url": "https://api.github.com/users/kohlerjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/kohlerjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kohlerjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kohlerjl/subscriptions",
      "organizations_url": "https://api.github.com/users/kohlerjl/orgs",
      "repos_url": "https://api.github.com/users/kohlerjl/repos",
      "events_url": "https://api.github.com/users/kohlerjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kohlerjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-07T21:50:27Z",
    "updated_at": "2021-03-07T21:50:27Z",
    "author_association": "NONE",
    "body": "Thanks for the quick follow up. \r\n\r\nI spent some time trying to isolate a simple notebook that would reproduce the event. What I've found is that this behavior does not persist between closing and reopening the notebook, or even just refreshing the browser tab (leaving the kernel still running). \r\n\r\nHowever, I've been able to consistently reproduce this behavior by following these steps:\r\n\r\n1. Create a new notebook and enter some code in a cell (i.e. 'a = 1')\r\n2. Save the notebook, then refresh the tab\r\n3. Copy the cell and paste a duplicate within the same notebook\r\n4. Save the notebook again, triggering the error\r\n\r\nIt appears that this behavior does not occur if you duplicate a cell created in the same 'session' (i.e. while the notebook is open in the tab). But If I copy and paste a cell created prior to opening/refreshing the notebook, either from the same notebook or a different notebook, then I get errors about duplicate ids. But the notebook changes do save, and I can simply refresh the tab to mitigate the errors.\r\n\r\nI have attached a notebook I produced this way, which gave me the errors prior to reloading it. However, I can't see any difference in the file structure. [test.ipynb.txt](https://github.com/jupyter/notebook/files/6098006/test.ipynb.txt)\r\n\r\nI also cannot reproduce this behavior on another system, running Python 3.9.2 and:\r\n  ipython                       7.19.0\r\n  jupyter-client                6.1.7\r\n  jupyter-console             6.2.0\r\n  jupyter-core                  4.6.3\r\n  jupyter-server               1.4.1\r\n  nbconvert                     6.0.7\r\n  nbformat                      5.0.8\r\n  notebook                      6.2.0\r\n\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/792961363",
    "html_url": "https://github.com/jupyter/notebook/issues/6001#issuecomment-792961363",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/6001",
    "id": 792961363,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5Mjk2MTM2Mw==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-08T18:10:19Z",
    "updated_at": "2021-03-08T18:10:19Z",
    "author_association": "MEMBER",
    "body": "Thanks @kohlerjl.  I'm still unable to reproduce this (sorry).  Are you using the Notebook classic or Juptyer Lab interface?  (Neither reproduces the issue for me however.)\r\n\r\n> I also cannot reproduce this behavior on another system, running Python 3.9.2 and:\r\n...\r\nnbformat 5.0.8\r\n\r\nThis would be because that version of nbformat doesn't contain this consistency check.  I'm using nbformat `5.1.2`, but, again, no luck.  Really curious what else could be going on.  \r\n\r\nBtw, we started displaying the notebook server version in the console when the server is started in the 6.x timeframe.  Could you please confirm the displayed value?  The log entry should look similar to the following:\r\n```\r\n[I 10:06:42.433 NotebookApp] Jupyter Notebook 6.2.0 is running at:\r\n```",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/796538240",
    "html_url": "https://github.com/jupyter/notebook/issues/6001#issuecomment-796538240",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/6001",
    "id": 796538240,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NjUzODI0MA==",
    "user": {
      "login": "kohlerjl",
      "id": 1612775,
      "node_id": "MDQ6VXNlcjE2MTI3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1612775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kohlerjl",
      "html_url": "https://github.com/kohlerjl",
      "followers_url": "https://api.github.com/users/kohlerjl/followers",
      "following_url": "https://api.github.com/users/kohlerjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/kohlerjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kohlerjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kohlerjl/subscriptions",
      "organizations_url": "https://api.github.com/users/kohlerjl/orgs",
      "repos_url": "https://api.github.com/users/kohlerjl/repos",
      "events_url": "https://api.github.com/users/kohlerjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kohlerjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-11T07:47:31Z",
    "updated_at": "2021-03-11T07:47:31Z",
    "author_association": "NONE",
    "body": "I can confirm that the notebook server reports \"Jupyter Notebook 6.2.0 is running at:\" on startup.\r\n\r\nI've been using Notebook classic. I installed Jupyter Lab and tried the same procedure, but cannot reproduce the behavior there. \r\n\r\nI might just transition to using Jupyter Lab going forward, since that seems to be more actively developed now.\r\n\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/796836639",
    "html_url": "https://github.com/jupyter/notebook/issues/6001#issuecomment-796836639",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/6001",
    "id": 796836639,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NjgzNjYzOQ==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-11T15:52:24Z",
    "updated_at": "2021-03-11T15:52:24Z",
    "author_association": "MEMBER",
    "body": "> I can confirm that the notebook server reports \"Jupyter Notebook 6.2.0 is running at:\" on startup.\r\n\r\nThank you.  I'll have to defer to @MSeal on this one.\r\n\r\n> I've been using Notebook classic. I installed Jupyter Lab and tried the same procedure, but cannot reproduce the behavior there.\r\n\r\nJust a point of clarity, Jupyter Lab >= 3 uses a different server (jupyter_server) whereas Lab < 3 still uses notebook as its server - although I believe the issue here lies in the front-end where cells are manipulated.  As a result, it might be helpful to know which version of Lab did not reproduce this behavior and whether you've tried this with Lab < 3.\r\n\r\n> ... Jupyter Lab ... seems to be more actively developed now.\r\n\r\nYes, that is absolutely the case.",
    "performed_via_github_app": null
  }
]
