[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/479408530",
    "html_url": "https://github.com/jupyter/notebook/issues/4527#issuecomment-479408530",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4527",
    "id": 479408530,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTQwODUzMA==",
    "user": {
      "login": "tritemio",
      "id": 4156237,
      "node_id": "MDQ6VXNlcjQxNTYyMzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4156237?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tritemio",
      "html_url": "https://github.com/tritemio",
      "followers_url": "https://api.github.com/users/tritemio/followers",
      "following_url": "https://api.github.com/users/tritemio/following{/other_user}",
      "gists_url": "https://api.github.com/users/tritemio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tritemio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tritemio/subscriptions",
      "organizations_url": "https://api.github.com/users/tritemio/orgs",
      "repos_url": "https://api.github.com/users/tritemio/repos",
      "events_url": "https://api.github.com/users/tritemio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tritemio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-03T09:16:46Z",
    "updated_at": "2019-04-03T09:16:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is the cause of https://github.com/tensorflow/tensorflow/issues/27304#.\r\n\r\nI believe that also #4518 is related.\r\n\r\nI rephrase the problem. When you activate an env in the terminal, the PATH is prepended with the environment's bin dir. Instead, if your run the notebook from a base environment and load the kernel of another env, the PATH is not changed. \r\n\r\nThis causes issues with tools that need to call executables and expect them to be in the PATH. This is the case for pydot (requires `dot` executable) and the %tensorboard magic (requires the `tensorboard` executable).",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/479409246",
    "html_url": "https://github.com/jupyter/notebook/issues/4527#issuecomment-479409246",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4527",
    "id": 479409246,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTQwOTI0Ng==",
    "user": {
      "login": "tritemio",
      "id": 4156237,
      "node_id": "MDQ6VXNlcjQxNTYyMzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4156237?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tritemio",
      "html_url": "https://github.com/tritemio",
      "followers_url": "https://api.github.com/users/tritemio/followers",
      "following_url": "https://api.github.com/users/tritemio/following{/other_user}",
      "gists_url": "https://api.github.com/users/tritemio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tritemio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tritemio/subscriptions",
      "organizations_url": "https://api.github.com/users/tritemio/orgs",
      "repos_url": "https://api.github.com/users/tritemio/repos",
      "events_url": "https://api.github.com/users/tritemio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tritemio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-03T09:18:47Z",
    "updated_at": "2019-04-03T09:18:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "**QUESTION**: Is there a way to create a kernel spec which prepends the env's bin dir to the PATH? \r\n\r\nIf yes, this would fix this issue.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/479633387",
    "html_url": "https://github.com/jupyter/notebook/issues/4527#issuecomment-479633387",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4527",
    "id": 479633387,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTYzMzM4Nw==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-03T19:49:20Z",
    "updated_at": "2019-04-03T19:49:20Z",
    "author_association": "MEMBER",
    "body": "Not sure if this helps, but you could augment the `argv` stanza of your kernelspec to use launch the kernel from a script and modify PATH prior to its launch...\r\n```json\r\n{\r\n \"env\": {\r\n  \"MY_ENV_BIN_DIR\": \"/opt/anaconda/envs/my_special_env/bin\"\r\n },\r\n \"argv\": [\r\n  \"/usr/local/share/jupyter/kernels/python3_with_env/prepend_and_launch.sh\",\r\n  \"python\",\r\n  \"-m\",\r\n  \"ipykernel_launcher\",\r\n  \"-f\",\r\n  \"{connection_file}\"\r\n ],\r\n \"display_name\": \"Python 3 with env\",\r\n \"language\": \"python\"\r\n}\r\n```\r\nthen, launch the kernel from...\r\n```bash\r\n#!/bin/bash\r\nexport PATH=${MY_ENV_BIN_DIR}:${PATH}\r\n$*\r\n```\r\nwith this as the result...\r\n![Screen Shot 2019-04-03 at 12 44 08 PM](https://user-images.githubusercontent.com/22599560/55508392-a9cfa780-560e-11e9-8529-64648087a37a.png)\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/479651327",
    "html_url": "https://github.com/jupyter/notebook/issues/4527#issuecomment-479651327",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4527",
    "id": 479651327,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTY1MTMyNw==",
    "user": {
      "login": "tritemio",
      "id": 4156237,
      "node_id": "MDQ6VXNlcjQxNTYyMzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4156237?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tritemio",
      "html_url": "https://github.com/tritemio",
      "followers_url": "https://api.github.com/users/tritemio/followers",
      "following_url": "https://api.github.com/users/tritemio/following{/other_user}",
      "gists_url": "https://api.github.com/users/tritemio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tritemio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tritemio/subscriptions",
      "organizations_url": "https://api.github.com/users/tritemio/orgs",
      "repos_url": "https://api.github.com/users/tritemio/repos",
      "events_url": "https://api.github.com/users/tritemio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tritemio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-03T20:43:52Z",
    "updated_at": "2019-04-03T20:43:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yes, it works as a stop-gap, thanks.\r\n\r\nHowever it is cumbersome to repeat for each environment. \r\n\r\nIdeally this should be done automatically when creating a kernel with some sort of `python -m ipykernel install ...`\r\n\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/479673403",
    "html_url": "https://github.com/jupyter/notebook/issues/4527#issuecomment-479673403",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4527",
    "id": 479673403,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTY3MzQwMw==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-03T21:56:01Z",
    "updated_at": "2019-04-03T21:56:01Z",
    "author_association": "MEMBER",
    "body": "Agreed.  Since this is an issue only when spanning envs, the \"target\" python env must then be determined.\r\n\r\nBtw, here's a repo that, I believe, fits your bill: https://github.com/Cadair/jupyter_environment_kernels. It does this by implementing a version of KernelSpecManager that performs the auto-detection.\r\n\r\nIn addition, you might get better traction in https://github.com/ipython/ipykernel, perhaps by adding a `--env` installation option that then does the right thing during launch by capturing the env during install - or some such thing.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/480404811",
    "html_url": "https://github.com/jupyter/notebook/issues/4527#issuecomment-480404811",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/4527",
    "id": 480404811,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDQwNDgxMQ==",
    "user": {
      "login": "wchargin",
      "id": 4317806,
      "node_id": "MDQ6VXNlcjQzMTc4MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4317806?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wchargin",
      "html_url": "https://github.com/wchargin",
      "followers_url": "https://api.github.com/users/wchargin/followers",
      "following_url": "https://api.github.com/users/wchargin/following{/other_user}",
      "gists_url": "https://api.github.com/users/wchargin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wchargin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wchargin/subscriptions",
      "organizations_url": "https://api.github.com/users/wchargin/orgs",
      "repos_url": "https://api.github.com/users/wchargin/repos",
      "events_url": "https://api.github.com/users/wchargin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wchargin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-05T20:03:08Z",
    "updated_at": "2019-04-05T20:03:08Z",
    "author_association": "NONE",
    "body": "Suggested change: `$*` should be `\"$@\"` (note quotes). See:\r\n<https://www.gnu.org/software/bash/manual/bashref.html#Special-Parameters>\r\n\r\n(It should probably also be `exec \"$@\"`, unless there’s a good reason.)\r\n",
    "performed_via_github_app": null
  }
]
