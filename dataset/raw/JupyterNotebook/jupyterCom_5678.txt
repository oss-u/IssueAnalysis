[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/673602356",
    "html_url": "https://github.com/jupyter/notebook/pull/5678#issuecomment-673602356",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5678",
    "id": 673602356,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzYwMjM1Ng==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T17:17:24Z",
    "updated_at": "2020-08-13T17:17:24Z",
    "author_association": "MEMBER",
    "body": "Thanks @golf-player.  I'll try to take a look at this via EG in the next day or two.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/673604020",
    "html_url": "https://github.com/jupyter/notebook/pull/5678#issuecomment-673604020",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5678",
    "id": 673604020,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzYwNDAyMA==",
    "user": {
      "login": "golf-player",
      "id": 35775018,
      "node_id": "MDQ6VXNlcjM1Nzc1MDE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/35775018?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/golf-player",
      "html_url": "https://github.com/golf-player",
      "followers_url": "https://api.github.com/users/golf-player/followers",
      "following_url": "https://api.github.com/users/golf-player/following{/other_user}",
      "gists_url": "https://api.github.com/users/golf-player/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/golf-player/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/golf-player/subscriptions",
      "organizations_url": "https://api.github.com/users/golf-player/orgs",
      "repos_url": "https://api.github.com/users/golf-player/repos",
      "events_url": "https://api.github.com/users/golf-player/events{/privacy}",
      "received_events_url": "https://api.github.com/users/golf-player/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T17:20:45Z",
    "updated_at": "2020-08-13T17:20:45Z",
    "author_association": "NONE",
    "body": "Appreciated!\n\nOn Thu, Aug 13, 2020, 12:17 Kevin Bates <notifications@github.com> wrote:\n\n> Thanks @golf-player <https://github.com/golf-player>. I'll try to take a\n> look at this via EG in the next day or two.\n>\n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/5678#issuecomment-673602356>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AIQ6EKQIIJHXTR3D74XHCBDSAQN3JANCNFSM4P6UNKUQ>\n> .\n>\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/674103079",
    "html_url": "https://github.com/jupyter/notebook/pull/5678#issuecomment-674103079",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5678",
    "id": 674103079,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NDEwMzA3OQ==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-14T14:31:02Z",
    "updated_at": "2020-08-14T14:31:02Z",
    "author_association": "MEMBER",
    "body": "I'm trying to reproduce the issue using the EG 2.2.0rc2 release with Hadoop YARN.  I suspect you're probably using Kubernetes.  How are you forcing the kernel's termination and do you have a connection to the kernel (from the front end) at that time?  Could you please provide log entries on both the EG and Notebook sides?  Thank you.\r\n\r\nOnce this can be reproduced, I'll move forward with PR review. ",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/674167937",
    "html_url": "https://github.com/jupyter/notebook/pull/5678#issuecomment-674167937",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5678",
    "id": 674167937,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NDE2NzkzNw==",
    "user": {
      "login": "golf-player",
      "id": 35775018,
      "node_id": "MDQ6VXNlcjM1Nzc1MDE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/35775018?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/golf-player",
      "html_url": "https://github.com/golf-player",
      "followers_url": "https://api.github.com/users/golf-player/followers",
      "following_url": "https://api.github.com/users/golf-player/following{/other_user}",
      "gists_url": "https://api.github.com/users/golf-player/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/golf-player/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/golf-player/subscriptions",
      "organizations_url": "https://api.github.com/users/golf-player/orgs",
      "repos_url": "https://api.github.com/users/golf-player/repos",
      "events_url": "https://api.github.com/users/golf-player/events{/privacy}",
      "received_events_url": "https://api.github.com/users/golf-player/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-14T16:56:35Z",
    "updated_at": "2020-08-14T16:56:35Z",
    "author_association": "NONE",
    "body": "So what I did was leave a fresh notebook instance open and then restarted EG. \r\n\r\nLogs from notebook is this ad infinitum. Note the frequency\r\n```\r\n[W 11:53:17.757 NotebookApp] Websocket connection has been closed via client disconnect or due to error.  Kernel with ID '8b0894d8-edbd-4484-b0d5-388242364f79' may not be terminated on GatewayClient: https://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/\r\n[I 11:53:17.758 NotebookApp] Attempting to re-establish the connection to Gateway: 8b0894d8-edbd-4484-b0d5-388242364f79\r\n[I 11:53:17.758 NotebookApp] Connecting to wss://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels\r\n[W 11:53:17.941 NotebookApp] Websocket connection has been closed via client disconnect or due to error.  Kernel with ID '8b0894d8-edbd-4484-b0d5-388242364f79' may not be terminated on GatewayClient: https://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/\r\n[I 11:53:17.941 NotebookApp] Attempting to re-establish the connection to Gateway: 8b0894d8-edbd-4484-b0d5-388242364f79\r\n[I 11:53:17.941 NotebookApp] Connecting to wss://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels\r\n[W 11:53:18.137 NotebookApp] Websocket connection has been closed via client disconnect or due to error.  Kernel with ID '8b0894d8-edbd-4484-b0d5-388242364f79' may not be terminated on GatewayClient: https://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/\r\n[I 11:53:18.138 NotebookApp] Attempting to re-establish the connection to Gateway: 8b0894d8-edbd-4484-b0d5-388242364f79\r\n[I 11:53:18.138 NotebookApp] Connecting to wss://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels\r\n[W 11:53:18.319 NotebookApp] Websocket connection has been closed via client disconnect or due to error.  Kernel with ID '8b0894d8-edbd-4484-b0d5-388242364f79' may not be terminated on GatewayClient: https://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/\r\n[I 11:53:18.320 NotebookApp] Attempting to re-establish the connection to Gateway: 8b0894d8-edbd-4484-b0d5-388242364f79\r\n[I 11:53:18.320 NotebookApp] Connecting to wss://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels\r\n[W 11:53:18.507 NotebookApp] Websocket connection has been closed via client disconnect or due to error.  Kernel with ID '8b0894d8-edbd-4484-b0d5-388242364f79' may not be terminated on GatewayClient: https://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/\r\n[I 11:53:18.508 NotebookApp] Attempting to re-establish the connection to Gateway: 8b0894d8-edbd-4484-b0d5-388242364f79\r\n[I 11:53:18.508 NotebookApp] Connecting to wss://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels\r\n[W 11:53:18.681 NotebookApp] Websocket connection has been closed via client disconnect or due to error.  Kernel with ID '8b0894d8-edbd-4484-b0d5-388242364f79' may not be terminated on GatewayClient: https://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/\r\n[I 11:53:18.681 NotebookApp] Attempting to re-establish the connection to Gateway: 8b0894d8-edbd-4484-b0d5-388242364f79\r\n[I 11:53:18.681 NotebookApp] Connecting to wss://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels\r\n[W 11:53:18.838 NotebookApp] Websocket connection has been closed via client disconnect or due to error.  Kernel with ID '8b0894d8-edbd-4484-b0d5-388242364f79' may not be terminated on GatewayClient: https://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/\r\n[I 11:53:18.838 NotebookApp] Attempting to re-establish the connection to Gateway: 8b0894d8-edbd-4484-b0d5-388242364f79\r\n[I 11:53:18.839 NotebookApp] Connecting to wss://enterprise-gateway-ishbook.bigqa.k8s.indeed.tech/api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels\r\n```\r\n\r\nAnd then on EG's side:\r\n```\r\n[W 200814 16:53:17 web:2250] 404 GET /api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels (10.42.9.69) 2.87ms\r\n[D 2020-08-14 16:53:17.401 EnterpriseGatewayApp] Initializing websocket connection /api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels\r\n[W 2020-08-14 16:53:17.403 EnterpriseGatewayApp] No session ID specified\r\n[W 200814 16:53:17 web:1786] 404 GET /api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels (10.42.9.69): Kernel does not exist: 8b0894d8-edbd-4484-b0d5-388242364f79\r\n[W 200814 16:53:17 web:2250] 404 GET /api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels (10.42.9.69) 3.96ms\r\n[D 2020-08-14 16:53:17.576 EnterpriseGatewayApp] Initializing websocket connection /api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels\r\n[W 2020-08-14 16:53:17.579 EnterpriseGatewayApp] No session ID specified\r\n[W 200814 16:53:17 web:1786] 404 GET /api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels (10.42.9.69): Kernel does not exist: 8b0894d8-edbd-4484-b0d5-388242364f79\r\n[W 200814 16:53:17 web:2250] 404 GET /api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels (10.42.9.69) 4.16ms\r\n[D 2020-08-14 16:53:17.751 EnterpriseGatewayApp] Initializing websocket connection /api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels\r\n[W 2020-08-14 16:53:17.754 EnterpriseGatewayApp] No session ID specified\r\n[W 200814 16:53:17 web:1786] 404 GET /api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels (10.42.9.69): Kernel does not exist: 8b0894d8-edbd-4484-b0d5-388242364f79\r\n[W 200814 16:53:17 web:2250] 404 GET /api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels (10.42.9.69) 4.06ms\r\n[D 2020-08-14 16:53:17.926 EnterpriseGatewayApp] Initializing websocket connection /api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels\r\n[W 2020-08-14 16:53:17.929 EnterpriseGatewayApp] No session ID specified\r\n[W 200814 16:53:17 web:1786] 404 GET /api/kernels/8b0894d8-edbd-4484-b0d5-388242364f79/channels (10.42.16.10): Kernel does not exist: 8b0894d8-edbd-4484-b0d5-388242364f79\r\n```\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/674273757",
    "html_url": "https://github.com/jupyter/notebook/pull/5678#issuecomment-674273757",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5678",
    "id": 674273757,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NDI3Mzc1Nw==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-14T21:10:52Z",
    "updated_at": "2020-08-14T21:10:52Z",
    "author_association": "MEMBER",
    "body": "Thanks for the hint - that definitely helps. \r\n\r\nSo, with or without this change, it looks like the gateway handler enters the infinite-loop when the gateway server goes down.  I do see, however, the loop stops once the gateway is back up.  So I agree, I think we're going to need some form of backoff on the front half of this (when the handler detects the gateway has gone down).",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/680944675",
    "html_url": "https://github.com/jupyter/notebook/pull/5678#issuecomment-680944675",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5678",
    "id": 680944675,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDk0NDY3NQ==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-26T15:16:02Z",
    "updated_at": "2020-08-26T15:16:02Z",
    "author_association": "MEMBER",
    "body": "Hi @golf-player. Just checking on the status of this.  I think the backoff should be part of this PR.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/716071478",
    "html_url": "https://github.com/jupyter/notebook/pull/5678#issuecomment-716071478",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5678",
    "id": 716071478,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjA3MTQ3OA==",
    "user": {
      "login": "telamonian",
      "id": 2263641,
      "node_id": "MDQ6VXNlcjIyNjM2NDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2263641?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/telamonian",
      "html_url": "https://github.com/telamonian",
      "followers_url": "https://api.github.com/users/telamonian/followers",
      "following_url": "https://api.github.com/users/telamonian/following{/other_user}",
      "gists_url": "https://api.github.com/users/telamonian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/telamonian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/telamonian/subscriptions",
      "organizations_url": "https://api.github.com/users/telamonian/orgs",
      "repos_url": "https://api.github.com/users/telamonian/repos",
      "events_url": "https://api.github.com/users/telamonian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/telamonian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-25T00:06:31Z",
    "updated_at": "2020-10-25T00:06:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've seen the same problem using EG on kube. If it's okay with @golf-player, I may take a crack at this PR",
    "performed_via_github_app": null
  }
]
