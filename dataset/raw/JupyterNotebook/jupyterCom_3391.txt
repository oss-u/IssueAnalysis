[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/370236957",
    "html_url": "https://github.com/jupyter/notebook/pull/3391#issuecomment-370236957",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3391",
    "id": 370236957,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDIzNjk1Nw==",
    "user": {
      "login": "quinot",
      "id": 1678806,
      "node_id": "MDQ6VXNlcjE2Nzg4MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1678806?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/quinot",
      "html_url": "https://github.com/quinot",
      "followers_url": "https://api.github.com/users/quinot/followers",
      "following_url": "https://api.github.com/users/quinot/following{/other_user}",
      "gists_url": "https://api.github.com/users/quinot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quinot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quinot/subscriptions",
      "organizations_url": "https://api.github.com/users/quinot/orgs",
      "repos_url": "https://api.github.com/users/quinot/repos",
      "events_url": "https://api.github.com/users/quinot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quinot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-04T15:17:27Z",
    "updated_at": "2018-03-04T15:17:27Z",
    "author_association": "NONE",
    "body": "Notes:\r\n\r\n- The choice of what metadata to pass or not is pretty arbitrary. Here in the initial proposal for this PR we're passing the tags and a specific metadata attribute \"kernel_metadata\", but we could just as well decide to pass *all* cell metadata to the kernel;\r\n- Technically this can be achieved without changing the Notebook by [monkey patching CodeCell.execute](https://gist.github.com/quinot/e3801b09f754efb0f39ccfbf0b50eb40), but this is a bit ugly and probably more fragile than the proposed Notebook change.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/370696975",
    "html_url": "https://github.com/jupyter/notebook/pull/3391#issuecomment-370696975",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3391",
    "id": 370696975,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDY5Njk3NQ==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T08:06:31Z",
    "updated_at": "2018-03-06T08:06:31Z",
    "author_association": "MEMBER",
    "body": "Rather than try to pick which metadata is sent, perhaps send the whole `cell.metadata` structure in `metadata.cell_metadata` on the request? And only include it if it's not empty?",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/370831882",
    "html_url": "https://github.com/jupyter/notebook/pull/3391#issuecomment-370831882",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3391",
    "id": 370831882,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDgzMTg4Mg==",
    "user": {
      "login": "quinot",
      "id": 1678806,
      "node_id": "MDQ6VXNlcjE2Nzg4MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1678806?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/quinot",
      "html_url": "https://github.com/quinot",
      "followers_url": "https://api.github.com/users/quinot/followers",
      "following_url": "https://api.github.com/users/quinot/following{/other_user}",
      "gists_url": "https://api.github.com/users/quinot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quinot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quinot/subscriptions",
      "organizations_url": "https://api.github.com/users/quinot/orgs",
      "repos_url": "https://api.github.com/users/quinot/repos",
      "events_url": "https://api.github.com/users/quinot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quinot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T16:04:05Z",
    "updated_at": "2018-03-06T16:04:05Z",
    "author_association": "NONE",
    "body": "@minrk right, that's the alternative option I mentioned in the first comment above. I'll be happy to update the PR accordingly if you think that's a preferrable solution.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/370948035",
    "html_url": "https://github.com/jupyter/notebook/pull/3391#issuecomment-370948035",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3391",
    "id": 370948035,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDk0ODAzNQ==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T22:14:02Z",
    "updated_at": "2018-03-06T22:14:02Z",
    "author_association": "MEMBER",
    "body": "I think it is, since it heads off infinite follow-up \"add my metadata, too\" PRs.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/378693916",
    "html_url": "https://github.com/jupyter/notebook/pull/3391#issuecomment-378693916",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3391",
    "id": 378693916,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODY5MzkxNg==",
    "user": {
      "login": "BoPeng",
      "id": 9889312,
      "node_id": "MDQ6VXNlcjk4ODkzMTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9889312?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BoPeng",
      "html_url": "https://github.com/BoPeng",
      "followers_url": "https://api.github.com/users/BoPeng/followers",
      "following_url": "https://api.github.com/users/BoPeng/following{/other_user}",
      "gists_url": "https://api.github.com/users/BoPeng/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BoPeng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BoPeng/subscriptions",
      "organizations_url": "https://api.github.com/users/BoPeng/orgs",
      "repos_url": "https://api.github.com/users/BoPeng/repos",
      "events_url": "https://api.github.com/users/BoPeng/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BoPeng/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-04T18:10:20Z",
    "updated_at": "2018-04-04T18:10:20Z",
    "author_association": "NONE",
    "body": "I think a bigger question is how kernels handle the passed meta data? According to [the doc](http://jupyter-client.readthedocs.io/en/latest/wrapperkernels.html), the prototype for `do_execute` is\r\n\r\n```\r\ndo_execute(code, silent, store_history=True, user_expressions=None, allow_stdin=False)\r\n```\r\nwhich leaves no room to accept metadata.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/378897779",
    "html_url": "https://github.com/jupyter/notebook/pull/3391#issuecomment-378897779",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3391",
    "id": 378897779,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODg5Nzc3OQ==",
    "user": {
      "login": "quinot",
      "id": 1678806,
      "node_id": "MDQ6VXNlcjE2Nzg4MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1678806?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/quinot",
      "html_url": "https://github.com/quinot",
      "followers_url": "https://api.github.com/users/quinot/followers",
      "following_url": "https://api.github.com/users/quinot/following{/other_user}",
      "gists_url": "https://api.github.com/users/quinot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quinot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quinot/subscriptions",
      "organizations_url": "https://api.github.com/users/quinot/orgs",
      "repos_url": "https://api.github.com/users/quinot/repos",
      "events_url": "https://api.github.com/users/quinot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quinot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-05T10:57:22Z",
    "updated_at": "2018-04-05T10:57:22Z",
    "author_association": "NONE",
    "body": "@BoPeng kernels can peek at the passed metadata in the init_metadata method. See for instance\r\nhttps://github.com/quinot/sparkdisc_kernel/blob/master/binder/sparkdisc_kernel/kernel.py",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/378941901",
    "html_url": "https://github.com/jupyter/notebook/pull/3391#issuecomment-378941901",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/3391",
    "id": 378941901,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODk0MTkwMQ==",
    "user": {
      "login": "BoPeng",
      "id": 9889312,
      "node_id": "MDQ6VXNlcjk4ODkzMTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9889312?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BoPeng",
      "html_url": "https://github.com/BoPeng",
      "followers_url": "https://api.github.com/users/BoPeng/followers",
      "following_url": "https://api.github.com/users/BoPeng/following{/other_user}",
      "gists_url": "https://api.github.com/users/BoPeng/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BoPeng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BoPeng/subscriptions",
      "organizations_url": "https://api.github.com/users/BoPeng/orgs",
      "repos_url": "https://api.github.com/users/BoPeng/repos",
      "events_url": "https://api.github.com/users/BoPeng/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BoPeng/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-05T13:47:33Z",
    "updated_at": "2018-04-05T13:47:33Z",
    "author_association": "NONE",
    "body": "Thanks. I never knew the existence of [such a mechanism](https://github.com/ipython/ipykernel/blob/479932d5fe94e431eae22f3b6c6e2bc17940ad84/ipykernel/kernelbase.py#L390). The patch could solve most, but not all of my needs though, because SoS has some special \"global\" features (e.g. a magic to compose a workflow from multiple cells in the notebook) so I will need some \"callback\" mechanism to prepare metadata in the frontend. Right now I am using the same monkey patching method as you [described](https://gist.github.com/quinot/e3801b09f754efb0f39ccfbf0b50eb40).\r\n",
    "performed_via_github_app": null
  }
]
