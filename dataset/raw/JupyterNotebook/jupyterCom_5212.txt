[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/583677236",
    "html_url": "https://github.com/jupyter/notebook/issues/5212#issuecomment-583677236",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5212",
    "id": 583677236,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzY3NzIzNg==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-08T00:48:15Z",
    "updated_at": "2020-02-08T00:48:15Z",
    "author_association": "MEMBER",
    "body": "No, this CLI option is not currently tied to an environment variable.  I believe the preference in notebook is to avoid that where possible (although containerized envs make this approach attractive).",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/583698309",
    "html_url": "https://github.com/jupyter/notebook/issues/5212#issuecomment-583698309",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5212",
    "id": 583698309,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzY5ODMwOQ==",
    "user": {
      "login": "json2d",
      "id": 143295,
      "node_id": "MDQ6VXNlcjE0MzI5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/143295?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/json2d",
      "html_url": "https://github.com/json2d",
      "followers_url": "https://api.github.com/users/json2d/followers",
      "following_url": "https://api.github.com/users/json2d/following{/other_user}",
      "gists_url": "https://api.github.com/users/json2d/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/json2d/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/json2d/subscriptions",
      "organizations_url": "https://api.github.com/users/json2d/orgs",
      "repos_url": "https://api.github.com/users/json2d/repos",
      "events_url": "https://api.github.com/users/json2d/events{/privacy}",
      "received_events_url": "https://api.github.com/users/json2d/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-08T03:33:38Z",
    "updated_at": "2020-02-08T03:33:38Z",
    "author_association": "NONE",
    "body": "@kevin-bates yep you said it - it would be useful for working with containers. thanks for the info",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/583758850",
    "html_url": "https://github.com/jupyter/notebook/issues/5212#issuecomment-583758850",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5212",
    "id": 583758850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4Mzc1ODg1MA==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-08T17:35:23Z",
    "updated_at": "2020-02-08T17:35:23Z",
    "author_association": "MEMBER",
    "body": "Hi @json2d .  I'm inclined to propose we identify a small set of container-relevant options and env variable associations to them.  The previously mentioned preference may have been more of a \"generally speaking\" thing, and I think there could be value here.\r\n\r\nI think `port` and probably `ip` are two.  You'd definitely want to disable `port-retries` for this, but that could be something that's part of a \"baked in\" configuration.\r\n\r\nI'm going to re-open this until we determine the best approach forward here.  Thanks.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/583799591",
    "html_url": "https://github.com/jupyter/notebook/issues/5212#issuecomment-583799591",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5212",
    "id": 583799591,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4Mzc5OTU5MQ==",
    "user": {
      "login": "json2d",
      "id": 143295,
      "node_id": "MDQ6VXNlcjE0MzI5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/143295?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/json2d",
      "html_url": "https://github.com/json2d",
      "followers_url": "https://api.github.com/users/json2d/followers",
      "following_url": "https://api.github.com/users/json2d/following{/other_user}",
      "gists_url": "https://api.github.com/users/json2d/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/json2d/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/json2d/subscriptions",
      "organizations_url": "https://api.github.com/users/json2d/orgs",
      "repos_url": "https://api.github.com/users/json2d/repos",
      "events_url": "https://api.github.com/users/json2d/events{/privacy}",
      "received_events_url": "https://api.github.com/users/json2d/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-09T03:04:18Z",
    "updated_at": "2020-02-09T03:08:13Z",
    "author_association": "NONE",
    "body": "At the moment there are a few steps involved in running Jupyter containers with the port set via an environment variable like `NB_PORT`.\r\n\r\nFirst you need to create a `jupyter.Dockerfile` in your project:\r\n```Dockerfile\r\nFROM jupyter/minimal-notebook:latest\r\n\r\nENV NB_PORT 8888\r\n\r\n# run notebook on 0.0.0.0:8888\r\nCMD jupyter notebook --port=$NB_PORT --no-browser\r\n```\r\n\r\nSecond you need to build and tag the image:\r\n\r\n```\r\n$ docker build --file jupyter.Dockerfile --tag json2d/jupyter .\r\n```\r\n\r\nFinally you can run the image with `NB_PORT` set using something like:\r\n\r\n```bash\r\n$ export NB_PORT=9999\r\n$ docker run --env NB_PORT -p $NB_PORT:$NB_PORT json2d/jupyter\r\n```\r\n\r\nIt gets a bit messy when you go to publish/expose the port, but that's just what you have to do with Docker.\r\n\r\nSo if Jupyter could be patched to automatically use an environment like `NB_PORT` for the port, then potentially you could *skip the first two steps* and just use the official image `jupyter/minimal-notebook:latest` directly in the last step:\r\n```bash\r\n$ export NB_PORT=9999\r\n$ docker run --env NB_PORT -p $NB_PORT:$NB_PORT jupyter/minimal-notebook:latest\r\n```",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/583882549",
    "html_url": "https://github.com/jupyter/notebook/issues/5212#issuecomment-583882549",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5212",
    "id": 583882549,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4Mzg4MjU0OQ==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-09T19:20:58Z",
    "updated_at": "2020-02-09T19:20:58Z",
    "author_association": "MEMBER",
    "body": "Thanks @json2d.  Your example reminds me about the [docker-stacks](https://github.com/jupyter/docker-stacks) images and how this _could_ be accomplished via the various start scripts.  However, there are many who might build their own images and would like this capability.\r\n\r\nI think by adding support for specifying port via an env wihtin the application, we can allow for the existing behaviors to override.  For example, the _default_ port number would essentially come from the env, but the CLI option `--port` would override the env.  So, if you did this, ...\r\n\r\n```bash \r\nexport JUPYTER_PORT=8899\r\njupyter notebook --port 9999\r\n```\r\nNotebook would start on port `9999`, but with this...\r\n```bash \r\nexport JUPYTER_PORT=8899\r\njupyter notebook\r\n```\r\nit would start on port `8899`.  I believe this would allow for existing behaviors to not be side affected by someone now having JUPYTER_PORT in their env.\r\n\r\n\r\nBecause its imperative that port-retries be zero in these circumstances, yet its current default is `50`, I think we'd also want back it by an env as well.  If the port-retries env is not set, the default of `50` would still be used.  That said, I don't feel as strongly about `ip`.  So perhaps only the two port-based variables would have env backing.\r\n\r\nI can try to put together a pull request for this if you agree.  Once a PR is present, I think others might find a need to comment.  ",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/584301907",
    "html_url": "https://github.com/jupyter/notebook/issues/5212#issuecomment-584301907",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5212",
    "id": 584301907,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDMwMTkwNw==",
    "user": {
      "login": "json2d",
      "id": 143295,
      "node_id": "MDQ6VXNlcjE0MzI5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/143295?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/json2d",
      "html_url": "https://github.com/json2d",
      "followers_url": "https://api.github.com/users/json2d/followers",
      "following_url": "https://api.github.com/users/json2d/following{/other_user}",
      "gists_url": "https://api.github.com/users/json2d/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/json2d/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/json2d/subscriptions",
      "organizations_url": "https://api.github.com/users/json2d/orgs",
      "repos_url": "https://api.github.com/users/json2d/repos",
      "events_url": "https://api.github.com/users/json2d/events{/privacy}",
      "received_events_url": "https://api.github.com/users/json2d/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T19:13:36Z",
    "updated_at": "2020-02-10T19:13:36Z",
    "author_association": "NONE",
    "body": "I think having the CLI option `--port` overriding the env and setting port-retries to zero both seem sensible. I haven't used the `ip` option much so I couldn't really comment about its usefulness as an env var.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/584731715",
    "html_url": "https://github.com/jupyter/notebook/issues/5212#issuecomment-584731715",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/5212",
    "id": 584731715,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDczMTcxNQ==",
    "user": {
      "login": "kevin-bates",
      "id": 22599560,
      "node_id": "MDQ6VXNlcjIyNTk5NTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22599560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevin-bates",
      "html_url": "https://github.com/kevin-bates",
      "followers_url": "https://api.github.com/users/kevin-bates/followers",
      "following_url": "https://api.github.com/users/kevin-bates/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-bates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevin-bates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-bates/subscriptions",
      "organizations_url": "https://api.github.com/users/kevin-bates/orgs",
      "repos_url": "https://api.github.com/users/kevin-bates/repos",
      "events_url": "https://api.github.com/users/kevin-bates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevin-bates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-11T16:47:39Z",
    "updated_at": "2020-02-11T16:47:39Z",
    "author_association": "MEMBER",
    "body": "@json2d - I submitted the PR above.  It would be great if you could take it for a spin in your env to see how things work out. ",
    "performed_via_github_app": null
  }
]
