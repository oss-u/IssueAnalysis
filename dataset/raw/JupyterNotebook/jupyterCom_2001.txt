[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/268561952",
    "html_url": "https://github.com/jupyter/notebook/issues/2001#issuecomment-268561952",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2001",
    "id": 268561952,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODU2MTk1Mg==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-21T16:10:12Z",
    "updated_at": "2016-12-21T16:10:12Z",
    "author_association": "MEMBER",
    "body": "Do you have a notebook that reproduces this? Something super weird is happening, because it looks like somehow an execute_result and display_data message are getting swapped around.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/268776022",
    "html_url": "https://github.com/jupyter/notebook/issues/2001#issuecomment-268776022",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2001",
    "id": 268776022,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODc3NjAyMg==",
    "user": {
      "login": "jonasrauber",
      "id": 5837385,
      "node_id": "MDQ6VXNlcjU4MzczODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5837385?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasrauber",
      "html_url": "https://github.com/jonasrauber",
      "followers_url": "https://api.github.com/users/jonasrauber/followers",
      "following_url": "https://api.github.com/users/jonasrauber/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasrauber/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasrauber/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasrauber/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasrauber/orgs",
      "repos_url": "https://api.github.com/users/jonasrauber/repos",
      "events_url": "https://api.github.com/users/jonasrauber/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasrauber/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-22T10:56:49Z",
    "updated_at": "2016-12-22T10:56:49Z",
    "author_association": "NONE",
    "body": "The above error message is shown in the browser in an overlay window above the Jupyter notebook, but only sometimes and I wasn't able to figure out the pattern when it does and when it doesn't. But I have a minimal working example that does already produce the \"Invalid JSON in body of request\" error message in the top right:\r\n\r\n![bildschirmfoto 2016-12-22 um 11 46 39](https://cloud.githubusercontent.com/assets/5837385/21423415/35df4738-c83d-11e6-9e30-6711f5f79a18.png)\r\n\r\n[bug.ipynb.zip](https://github.com/jupyter/notebook/files/668557/bug.ipynb.zip)\r\n\r\nTo reproduce it, you can do \"Kernel -> Restart & Run All\", then \"File -> Save and Checkpoint\", and if that doesn't produce the error message, rerun the last cell (such that it's execution count changes to 4) and then \"File -> Save and Checkpoint\" again. This reproduces the error for me quite reliably, and the file on disk is only overwritten (with the execution count set to 4) after several retries of \"File -> Save and Checkpoint\".",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/268787256",
    "html_url": "https://github.com/jupyter/notebook/issues/2001#issuecomment-268787256",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2001",
    "id": 268787256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODc4NzI1Ng==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-22T12:10:50Z",
    "updated_at": "2016-12-22T12:10:50Z",
    "author_association": "MEMBER",
    "body": "I've just run those commands, and I didn't reproduce the error.\r\n\r\nI see you have some extensions enabled in the notebook; can you try disabling those and see if the problem is still reproducible?",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/269194442",
    "html_url": "https://github.com/jupyter/notebook/issues/2001#issuecomment-269194442",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2001",
    "id": 269194442,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTE5NDQ0Mg==",
    "user": {
      "login": "jonasrauber",
      "id": 5837385,
      "node_id": "MDQ6VXNlcjU4MzczODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5837385?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasrauber",
      "html_url": "https://github.com/jonasrauber",
      "followers_url": "https://api.github.com/users/jonasrauber/followers",
      "following_url": "https://api.github.com/users/jonasrauber/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasrauber/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasrauber/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasrauber/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasrauber/orgs",
      "repos_url": "https://api.github.com/users/jonasrauber/repos",
      "events_url": "https://api.github.com/users/jonasrauber/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasrauber/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-26T09:59:56Z",
    "updated_at": "2016-12-26T09:59:56Z",
    "author_association": "NONE",
    "body": "Still happens when all extensions are disabled. I does seem to depend on the length of the audio. If I reduce the length of the random sequence to 1000 it always works, for 100000 as above, it now sometimes works and sometimes doesn't, and for longer ones it seems to almost always fail. Could you try it with much longer sequences?\r\n\r\nAny hints on how I can see more details of what's failing. In the browser console I just see that the server returns \"API request failed (400): Invalid JSON in body of request\".",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/276704065",
    "html_url": "https://github.com/jupyter/notebook/issues/2001#issuecomment-276704065",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2001",
    "id": 276704065,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjcwNDA2NQ==",
    "user": {
      "login": "dslemusp",
      "id": 6799189,
      "node_id": "MDQ6VXNlcjY3OTkxODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6799189?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dslemusp",
      "html_url": "https://github.com/dslemusp",
      "followers_url": "https://api.github.com/users/dslemusp/followers",
      "following_url": "https://api.github.com/users/dslemusp/following{/other_user}",
      "gists_url": "https://api.github.com/users/dslemusp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dslemusp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dslemusp/subscriptions",
      "organizations_url": "https://api.github.com/users/dslemusp/orgs",
      "repos_url": "https://api.github.com/users/dslemusp/repos",
      "events_url": "https://api.github.com/users/dslemusp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dslemusp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-01T16:24:35Z",
    "updated_at": "2017-02-01T16:24:35Z",
    "author_association": "NONE",
    "body": "I have a similar problem using sympy. After I do trigsimp (See last cell)\r\n\r\n<img width=\"1149\" alt=\"screen shot 2017-02-01 at 5 15 51 pm\" src=\"https://cloud.githubusercontent.com/assets/6799189/22515523/05d39112-e8a3-11e6-9fbc-ab4f89ddc188.png\">\r\n\r\nwith the command line error\r\n\r\n<img width=\"829\" alt=\"screen shot 2017-02-01 at 5 23 00 pm\" src=\"https://cloud.githubusercontent.com/assets/6799189/22515556/23bb5462-e8a3-11e6-85ac-2d5d3c031d2f.png\">\r\n\r\n\r\n[JSON_error.ipynb.zip](https://github.com/jupyter/notebook/files/745393/JSON_error.ipynb.zip)\r\n\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/278054872",
    "html_url": "https://github.com/jupyter/notebook/issues/2001#issuecomment-278054872",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2001",
    "id": 278054872,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODA1NDg3Mg==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-07T16:32:10Z",
    "updated_at": "2017-02-07T16:32:10Z",
    "author_association": "MEMBER",
    "body": "@dslemusp \r\n\r\nHere's a one character fix for your code: use `Omega` instead of `\\Omega` for your capital omega. Mostly a coincidence that this fixes it, but it does.\r\n\r\nI tracked this down, and it's a doozy. The first thing to note is that it's the plain text (unicode) output, not the latex output that's causing the problem. The second point is that the immediate cause is a bug in Sympy's unicode output, where it allows splitting lines in between a character and its combining characters (dot in this case), which results in the text trying to put the dot on a newline. The third bit is that only Safari seems to be affected, due to an unconditional unicode normalization.\r\n\r\n## Gruesome details:\r\n\r\nA minimal test to reproduce this:\r\n\r\n```python\r\nprint(u'\\n\\u0307x')\r\n```\r\n\r\nCode point [307](http://www.fileformat.info/info/unicode/char/0307/index.htm) is \"combining dot above\", and the issue at hand is that it's appearing after a newline. The utterly bizarre source of the problem is that Safari normalizes text to its combined format (NFC, see [this webkit bug](https://bugs.webkit.org/show_bug.cgi?id=113001)) when submitting ajax requests, so the JSON characters:\r\n\r\n    \\, n, DOT, x\r\n\r\nbecome:\r\n\r\n    \\, N WITH A DOT, x\r\n\r\nboth of which look like:\r\n\r\n    \\ṅx\r\n\r\nThe NFC form that webkit sends is invalid JSON because the `\\n` escape is no longer present.\r\n\r\n[This notebook](https://nbviewer.jupyter.org/gist/minrk/24327a18b5b3bff746194962f40636fd) illustrates what's going on.\r\n\r\n## What we can do about it\r\n\r\nI don't see a way to tell webkit to knock it off, so there are two options I can see:\r\n\r\n1. use ascii-safe JSON.stringify on Safari\r\n2. normalize to NFD server-side before parsing with JSON (optionally only after failed parse, since this should be rare)\r\n\r\nI'm not thrilled about either one, especially for such a narrow case. Since it does require truly bizarre sequence of events to hit it.\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/278059706",
    "html_url": "https://github.com/jupyter/notebook/issues/2001#issuecomment-278059706",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2001",
    "id": 278059706,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODA1OTcwNg==",
    "user": {
      "login": "dslemusp",
      "id": 6799189,
      "node_id": "MDQ6VXNlcjY3OTkxODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6799189?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dslemusp",
      "html_url": "https://github.com/dslemusp",
      "followers_url": "https://api.github.com/users/dslemusp/followers",
      "following_url": "https://api.github.com/users/dslemusp/following{/other_user}",
      "gists_url": "https://api.github.com/users/dslemusp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dslemusp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dslemusp/subscriptions",
      "organizations_url": "https://api.github.com/users/dslemusp/orgs",
      "repos_url": "https://api.github.com/users/dslemusp/repos",
      "events_url": "https://api.github.com/users/dslemusp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dslemusp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-07T16:45:30Z",
    "updated_at": "2017-02-07T16:45:30Z",
    "author_association": "NONE",
    "body": "@minrk \r\n\r\nThank you for figuring this out. I am relatively new in python/Jupyter and Im not sure Im following quite well the specifics of the issue (Im not really a skilled programmer), but I understand that there is an issue on the way the text is being passed by safari. Indeed it is quite surprising that removing the `\\` from the `\\Omega` solves it.\r\n\r\nThank you again",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/340116404",
    "html_url": "https://github.com/jupyter/notebook/issues/2001#issuecomment-340116404",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2001",
    "id": 340116404,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDExNjQwNA==",
    "user": {
      "login": "PedroGFonseca",
      "id": 8465611,
      "node_id": "MDQ6VXNlcjg0NjU2MTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8465611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PedroGFonseca",
      "html_url": "https://github.com/PedroGFonseca",
      "followers_url": "https://api.github.com/users/PedroGFonseca/followers",
      "following_url": "https://api.github.com/users/PedroGFonseca/following{/other_user}",
      "gists_url": "https://api.github.com/users/PedroGFonseca/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PedroGFonseca/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PedroGFonseca/subscriptions",
      "organizations_url": "https://api.github.com/users/PedroGFonseca/orgs",
      "repos_url": "https://api.github.com/users/PedroGFonseca/repos",
      "events_url": "https://api.github.com/users/PedroGFonseca/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PedroGFonseca/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-27T22:57:26Z",
    "updated_at": "2017-10-27T22:57:26Z",
    "author_association": "NONE",
    "body": "For those who might find this when trying to get their Jupyter to work: if all else fails, turn the cells into markdown (you can do this in Pycharm), and then save. At this point it should open in the regular jupyter.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/502719448",
    "html_url": "https://github.com/jupyter/notebook/issues/2001#issuecomment-502719448",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/2001",
    "id": 502719448,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMjcxOTQ0OA==",
    "user": {
      "login": "EngineerReversed",
      "id": 20800767,
      "node_id": "MDQ6VXNlcjIwODAwNzY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20800767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EngineerReversed",
      "html_url": "https://github.com/EngineerReversed",
      "followers_url": "https://api.github.com/users/EngineerReversed/followers",
      "following_url": "https://api.github.com/users/EngineerReversed/following{/other_user}",
      "gists_url": "https://api.github.com/users/EngineerReversed/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EngineerReversed/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EngineerReversed/subscriptions",
      "organizations_url": "https://api.github.com/users/EngineerReversed/orgs",
      "repos_url": "https://api.github.com/users/EngineerReversed/repos",
      "events_url": "https://api.github.com/users/EngineerReversed/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EngineerReversed/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-17T14:58:51Z",
    "updated_at": "2019-06-17T14:58:51Z",
    "author_association": "NONE",
    "body": "As @jonasrauber pointed out, I am facing the same error. \r\nHowever, I have found the workaround for now. Using `ipywidgets.Audio.from_file`, notebook validation successfully holds. \r\n\r\nI am using the following versions:\r\n```\r\nipywidgets==7.4.2\r\nnbformat==4.4.0\r\njupyter==1.0.0\r\nnotebook==5.7.8\r\n```",
    "performed_via_github_app": null
  }
]
