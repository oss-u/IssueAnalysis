[
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/141055747",
    "html_url": "https://github.com/jupyter/notebook/pull/449#issuecomment-141055747",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/449",
    "id": 141055747,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTA1NTc0Nw==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-17T12:02:06Z",
    "updated_at": "2015-09-17T12:02:06Z",
    "author_association": "MEMBER",
    "body": "Thanks. I'm still surprised this is failing, since all the variables should be unicode strings already. Can you add a debug statement that prints\n\n``` python\nprint(\"os_dir=%r, name=%r, os_path=%r\" % (os_dir, name, os_path))\n```\n\nand share the output for the failing directory?\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/141094615",
    "html_url": "https://github.com/jupyter/notebook/pull/449#issuecomment-141094615",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/449",
    "id": 141094615,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTA5NDYxNQ==",
    "user": {
      "login": "vext01",
      "id": 604955,
      "node_id": "MDQ6VXNlcjYwNDk1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/604955?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vext01",
      "html_url": "https://github.com/vext01",
      "followers_url": "https://api.github.com/users/vext01/followers",
      "following_url": "https://api.github.com/users/vext01/following{/other_user}",
      "gists_url": "https://api.github.com/users/vext01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vext01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vext01/subscriptions",
      "organizations_url": "https://api.github.com/users/vext01/orgs",
      "repos_url": "https://api.github.com/users/vext01/repos",
      "events_url": "https://api.github.com/users/vext01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vext01/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-17T13:56:45Z",
    "updated_at": "2015-09-17T13:56:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here's what we print for the troublesome filename:\n\n```\nos_dir=u'/home/edd', name='.\\n    set document.color\\x1a\\xb0\\x7f\\xa6w', os_path=u'/home/edd/.systrace'\n```\n\nIs the problem that os.path.join expects to build an ascii string? If you look  at the types, `os_dir` is a unicode string, whereas name is not.\n\n```\nIn [25]: x\nOut[25]: '.\\n    set document.color\\x1a\\xb0\\x7f\\xa6w'\nIn [26]: os.path.join(\"\", x)\nOut[26]: '.\\n    set document.color\\x1a\\xb0\\x7f\\xa6w'\n\nIn [27]: os.path.join(u\"\", x)\n---------------------------------------------------------------------------\nUnicodeDecodeError                        Traceback (most recent call last)\n<ipython-input-27-239136892ae0> in <module>()\n----> 1 os.path.join(u\"\", x)\n\n/usr/local/lib/python2.7/posixpath.pyc in join(a, *p)\n     69             path = b\n     70         elif path == '' or path.endswith('/'):\n---> 71             path +=  b\n     72         else:\n     73             path += '/' + b\n\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xb0 in position 25: ordinal not in range(128)\n```\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/141378356",
    "html_url": "https://github.com/jupyter/notebook/pull/449#issuecomment-141378356",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/449",
    "id": 141378356,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTM3ODM1Ng==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-18T08:17:04Z",
    "updated_at": "2015-09-18T08:17:04Z",
    "author_association": "MEMBER",
    "body": "What surprises me is that `name` is a str and not unicode, which it should be. What do you get from `os.listdir(u'.')`? And what is the full Python version? When I use Python 2.7.10, listdir returns the same type as its input.\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/142351480",
    "html_url": "https://github.com/jupyter/notebook/pull/449#issuecomment-142351480",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/449",
    "id": 142351480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MjM1MTQ4MA==",
    "user": {
      "login": "vext01",
      "id": 604955,
      "node_id": "MDQ6VXNlcjYwNDk1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/604955?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vext01",
      "html_url": "https://github.com/vext01",
      "followers_url": "https://api.github.com/users/vext01/followers",
      "following_url": "https://api.github.com/users/vext01/following{/other_user}",
      "gists_url": "https://api.github.com/users/vext01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vext01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vext01/subscriptions",
      "organizations_url": "https://api.github.com/users/vext01/orgs",
      "repos_url": "https://api.github.com/users/vext01/repos",
      "events_url": "https://api.github.com/users/vext01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vext01/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-22T17:08:09Z",
    "updated_at": "2015-09-22T17:08:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\n$ python2.7\nPython 2.7.10 (default, Sep  1 2015, 08:18:20) \n[GCC 4.2.1 20070719 ] on openbsd5\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import os\n>>> os.listdir(u'.')\n[u'.cvsrc', u'.Xdefaults', u'.cshrc', u'.ssh', ..., '.\\n    set document.color\\x1a\\xb0\\x7f\\xa6w', ...]\n>>> os.listdir('.')\n['.cvsrc', '.Xdefaults', '.cshrc', '.ssh', ..., '.\\n    set document.color\\x1a\\xb0\\x7f\\xa6w', ...]\n```\n\nIn the former case, all elements are unicode bar the problem element. Is it because the unicode codebases are invalid?\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/142557040",
    "html_url": "https://github.com/jupyter/notebook/pull/449#issuecomment-142557040",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/449",
    "id": 142557040,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MjU1NzA0MA==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-23T10:21:26Z",
    "updated_at": "2015-09-23T10:21:26Z",
    "author_association": "MEMBER",
    "body": "@vext01 Thanks for investigating. In that case, I think this fix is fine as-is, but at least we know the affected case:\n- Python 2 + filenames that Python cannot decode from the filesystem (e.g. non-utf8).\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/jupyter/notebook/issues/comments/142559322",
    "html_url": "https://github.com/jupyter/notebook/pull/449#issuecomment-142559322",
    "issue_url": "https://api.github.com/repos/jupyter/notebook/issues/449",
    "id": 142559322,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MjU1OTMyMg==",
    "user": {
      "login": "vext01",
      "id": 604955,
      "node_id": "MDQ6VXNlcjYwNDk1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/604955?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vext01",
      "html_url": "https://github.com/vext01",
      "followers_url": "https://api.github.com/users/vext01/followers",
      "following_url": "https://api.github.com/users/vext01/following{/other_user}",
      "gists_url": "https://api.github.com/users/vext01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vext01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vext01/subscriptions",
      "organizations_url": "https://api.github.com/users/vext01/orgs",
      "repos_url": "https://api.github.com/users/vext01/repos",
      "events_url": "https://api.github.com/users/vext01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vext01/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-23T10:28:49Z",
    "updated_at": "2015-09-23T10:28:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks so much.\n",
    "performed_via_github_app": null
  }
]
